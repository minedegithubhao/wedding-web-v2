{"remainingRequest":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/pts/Upload/VenusUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/pts/Upload/VenusUpload.vue","mtime":1605568762425},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qKgogKiAg5L2c6ICF77ya5aea5q2j6LaFCiAqICDmj4/ov7DvvJpWMS4w54mI5pys77yM6K+35Yu/6ZqP5oSP5Lmx5pu05pS557uE5Lu2CiAqICDml6XmnJ/vvJoyMDIw5bm0NeaciDnml6UKICovCmltcG9ydCB7IFVwbG9hZCBhcyBVIH0gZnJvbSAnYW50LWRlc2lnbi12dWUnCmltcG9ydCB7IFVVSURUU3lzU2VyaWFsTnVtYmVyIH0gZnJvbSAnQC9hcGkvcHRzL3N5cy9UU3lzU2VyaWFsTnVtYmVyJwppbXBvcnQgeyBBQ0NFU1NfVE9LRU4gfSBmcm9tICdAL3N0b3JlL211dGF0aW9uLXR5cGVzJwppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKaW1wb3J0IHsgZG93bmxvYWRUU3lzRmlsZSwgaW5pdFRTeXNGaWxlTGlzdCwgZGVsVFN5c0ZpbGUgfSBmcm9tICdAL2FwaS9wdHMvc3lzL1RTeXNGaWxlJwppbXBvcnQgcHJlZml4IGZyb20gJ0AvY29uZmlnL3ByZWZpeCcKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVmVudXNVcGxvYWQnLAogIG1vZGVsOiB7CiAgICBwcm9wOiAndmFsdWUnLAogICAgZXZlbnQ6ICdjaGFuZ2UnCiAgfSwKICBwcm9wczogT2JqZWN0LmFzc2lnbih7fSwgVS5wcm9wcywgewogICAgaGVhZGVyczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4geyB0b2tlbjogVnVlLmxzLmdldChBQ0NFU1NfVE9LRU4pIH0KICAgICAgfQogICAgfSwKICAgIGFjdGlvbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgLy8g5paH5Lu257G75Z6L6ZmQ5Yi2CiAgICBhY2NlcHRUeXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJyonCiAgICB9LAogICAgLy8g5paH5Lu25aSn5bCP6ZmQ5Yi2CiAgICBtYXhTaXplOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogdW5kZWZpbmVkCiAgICB9LAogICAgLy8g5pyA5aSn5YiX6KGo6ZW/5bqm77yM5aaC5LiK5Lyg5aSa5Liq5paH5Lu25q2k5bGe5oCn5b+F6aG75a2Y5ZyoCiAgICBtYXhMZW5ndGg6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCiAgICAvLyDnlLHkuo5hbnRkID0+IEZvcm3ooajljZXnu4Tku7bpmZDliLbmiYDliqDlsZ7mgKfvvIzml6DpnIDlhbPms6gKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICAvLyDmmK/lkKbkuIrkvKDliLDpnZnmgIHotYTmupDlvIDmlL7ot6/lvoQKICAgIGlzT3BlbjogewogICAgICB0eXBlOiBbQm9vbGVhbiwgU3RyaW5nXSwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICAvLyDkuIrkvKDmiJDlip/nmoTlm57osIPmlrnms5UKICAgIHVwbG9hZFN1Y2Nlc3M6IHsKICAgICAgLy8gdHlwZTogRnVuY3Rpb24KICAgIH0sCiAgICAvLyDkuIrkvKDmiJDlip/nmoTlm57osIPmlrnms5UKICAgIHVwbG9hZEVycm9yOiB7CiAgICAgIC8vIHR5cGU6IEZ1bmN0aW9uCiAgICB9LAogICAgZGlzYWJsZWRVcGxvYWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9KSwKICBkYXRhICgpIHsKICAgIGNvbnN0IHZhbHVlID0gIXRoaXMudmFsdWUgfHwgdGhpcy52YWx1ZSA9PT0gMCB8fCB0aGlzLnZhbHVlID09PSAnMCcgPyAnJyA6IHRoaXMudmFsdWUKICAgIGlmICh0aGlzLmRpc2FibGVkVXBsb2FkICYmIHRoaXMuZGlzYWJsZWQgJiYgdGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlICE9PSAnMCcpIHsKICAgICAgdGhpcy5VVUlEID0gdmFsdWUKICAgICAgdGhpcy5zRmlsZUxpc3QgPSBbXQogICAgICB0aGlzLmluaXRVcGxvYWQoKQogICAgfQogICAgcmV0dXJuIHsKICAgICAgc0ZpbGVMaXN0OiBbXSwKICAgICAgVVVJRDogdmFsdWUKICAgICAgLy8gYnVzSWQ6IHZhbHVlCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZGVmYXVsdEFjdGlvbjogZnVuY3Rpb24gKCkgewogICAgICBjb25zdCBidXNJZCA9IHRoaXMuVVVJRCB8fCB0aGlzLnZhbHVlCiAgICAgIHJldHVybiBwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9CQVNFX1VSTCArICcvcHRzL3N5cy9UU3lzRmlsZS91cGxvYWQ/YnVzSWQ9JyArIGJ1c0lkICsgJyZpc09wZW49JyArIHRoaXMubWF0Y2hPcGVuCiAgICB9LAogICAgbWF0Y2hPcGVuOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzT3BlbiA9PT0gdHJ1ZSB8fCB0aGlzLmlzT3BlbiA9PT0gJ3RydWUnID8gMSA6IDAKICAgIH0KICB9LAogIC8vIGFzeW5jIG1vdW50ZWQoKSB7CiAgLy8gICB0aGlzLlVVSUQgPSB0aGlzLnZhbHVlCiAgLy8gfSwKICBiZWZvcmVEZXN0cm95ICgpIHsKICAgIHRoaXMuc0ZpbGVMaXN0ID0gW10KICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZSAodmFsID0gJycpIHsKICAgICAgaWYgKCghdmFsIHx8IHZhbCA9PT0gJzAnKSAmJiAhdGhpcy5kaXNhYmxlZFVwbG9hZCkgewogICAgICAgIHRoaXMuc0ZpbGVMaXN0ID0gW10KICAgICAgICB0aGlzLmhhbmRsZVVVSUQoKQogICAgICB9IGVsc2UgaWYgKCh0aGlzLlVVSUQgJiYgdGhpcy5VVUlEICE9PSB2YWwpIHx8ICF0aGlzLlVVSUQpIHsKICAgICAgICB0aGlzLlVVSUQgPSB2YWwKICAgICAgICB0aGlzLnNGaWxlTGlzdCA9IFtdCiAgICAgICAgdGhpcy5pbml0VXBsb2FkKCkKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCAoKSB7IH0sCiAgbWV0aG9kczogewogICAgdHJpZ2dlckNoYW5nZSAoZSkgewogICAgICAvLyBTaG91bGQgcHJvdmlkZSBhbiBldmVudCB0byBwYXNzIHZhbHVlIHRvIEZvcm0uCiAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHRoaXMuVVVJRCkKICAgIH0sCiAgICBhc3luYyBoYW5kbGVVVUlEICgpIHsKICAgICAgYXdhaXQgVVVJRFRTeXNTZXJpYWxOdW1iZXIoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgICB0aGlzLlVVSUQgPSByZXMuZGF0YQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhuZXcgRXJyb3IoJ+iOt+WPlmJ1c0lk5aSx6LSlJykpCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDnu4Tku7blh7rnjrDmhI/lpJbplJnor68nKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2UgKGUpIHsKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgZS50YXJnZXQudmFsdWUpCiAgICB9LAogICAgZmlsZUNoYW5nZSAoeyBmaWxlLCBmaWxlTGlzdCB9KSB7CiAgICAgIGlmIChmaWxlLnN0YXR1cyAhPT0gJ3VwbG9hZGluZycpIHsKICAgICAgfQogICAgICBpZiAoZmlsZS5zdGF0dXMgPT09ICdkb25lJykgewogICAgICAgIC8vIHRoaXMuaW5pdFVwbG9hZCgpCiAgICAgICAgaWYgKGZpbGUucmVzcG9uc2UuY29kZSA9PT0gMCkgewogICAgICAgICAgZmlsZUxpc3QubWFwKGVsID0+IHsKICAgICAgICAgICAgaWYgKGVsLnVpZCA9PT0gZmlsZS51aWQpIHsKICAgICAgICAgICAgICBlbFsnbGlua1Byb3BzJ10gPSB7IGRvd25sb2FkOiAnY3VycmVudCcgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBlbAogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhgJHtmaWxlLm5hbWV9IOaWh+S7tuS4iuS8oOaIkOWKn2ApCiAgICAgICAgICB0aGlzLiRlbWl0KCdzdWNjZXNzJywgZmlsZS5yZXNwb25zZSkKICAgICAgICAgIC8vIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmlsZUxpc3QubWFwKGVsID0+IHsKICAgICAgICAgICAgaWYgKGVsLnVpZCA9PT0gZmlsZS51aWQpIHsKICAgICAgICAgICAgICBlbFsnbGlua1Byb3BzJ10gPSB7IGRvd25sb2FkOiAnY3VycmVudCcgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBlbAogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYCR7ZmlsZS5uYW1lfSDmlofku7bkuIrkvKDlpLHotKVgICsgZmlsZS5yZXNwb25zZS5tc2cpCiAgICAgICAgICB0aGlzLiRlbWl0KCdlcnJvcicsIGZpbGUucmVzcG9uc2UpCiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGZpbGUuc3RhdHVzID09PSAnZXJyb3InKSB7CiAgICAgICAgZmlsZUxpc3QubWFwKGVsID0+IHsKICAgICAgICAgIGlmIChlbC51aWQgPT09IGZpbGUudWlkKSB7CiAgICAgICAgICAgIGVsWydsaW5rUHJvcHMnXSA9IHsgZG93bmxvYWQ6ICdjdXJyZW50JyB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZWwKICAgICAgICB9KQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYCR7ZmlsZS5uYW1lfSDmlofku7bkuIrkvKDlpLHotKVgKQogICAgICAgIHRoaXMuJGVtaXQoJ2Vycm9yJywgZmlsZS5yZXNwb25zZSkKICAgICAgfQogICAgICBpZiAoZmlsZS5zdGF0dXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuc0ZpbGVMaXN0ID0gZmlsZUxpc3QKICAgICAgICB0aGlzLnRyaWdnZXJDaGFuZ2UoKQogICAgICB9CiAgICB9LAogICAgZmlsZVByZXZpZXcgKGZpbGUpIHsKICAgICAgaWYgKGZpbGUuc3RhdHVzID09PSAnZG9uZScpIHsKICAgICAgICBpZiAoZmlsZS5saW5rUHJvcHMuZG93bmxvYWQgPT09ICdlcnJvcicpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYCR7ZmlsZS5uYW1lfSDmlofku7bkuIrkvKDlpLHotKXvvIzml6Dms5XkuIvovb1gKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkb3dubG9hZFRTeXNGaWxlKHsgZmlsZUlkOiBmaWxlLnJlc3BvbnNlLmZpbGVJZCwgZGVsZXRlOiBmYWxzZSB9KQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGAke2ZpbGUubmFtZX0g5paH5Lu25LiL6L295Ye6546w6ZSZ6K+vYCkKICAgICAgfQogICAgfSwKICAgIGluaXRVcGxvYWQgKCkgewogICAgICBjb25zdCBzZWxmID0gdGhpcwogICAgICBpbml0VFN5c0ZpbGVMaXN0KHsgYnVzSWQ6IHRoaXMudmFsdWUgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgLy8gY29uc29sZS5sb2coJ+aWh+S7tuWIl+ihqOWIneWni+WMluW8gOWniy0tLS0tLS0tLS0tLS0nKQogICAgICAgICAgaWYgKHNlbGYubGlzdFR5cGUgPT09ICd0ZXh0JyAmJiB0aGlzLm1hdGNoT3BlbiA9PT0gMSkgewogICAgICAgICAgICByZXMuZGF0YS5zb21lKChpdGVtLCBpKSA9PiB7CiAgICAgICAgICAgICAgc2VsZi5zRmlsZUxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICB1aWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgICAgICBuYW1lOiA8YS10b29sdGlwPjx0ZW1wbGF0ZSBzbG90PSJ0aXRsZSI+eyfngrnlh7vkuIvovb3mlofku7YnfTwvdGVtcGxhdGU+e2l0ZW0uZmlsZVJlYWxuYW1lfTwvYS10b29sdGlwPiwKICAgICAgICAgICAgICAgIHN0YXR1czogJ2RvbmUnLAogICAgICAgICAgICAgICAgcmVzcG9uc2U6IHsgZmlsZUlkOiBpdGVtLmlkIH0sCiAgICAgICAgICAgICAgICBsaW5rUHJvcHM6IHsgZG93bmxvYWQ6ICdjdXJyZW50JyB9CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcy5kYXRhLnNvbWUoKGl0ZW0sIGkpID0+IHsKICAgICAgICAgICAgICBzZWxmLnNGaWxlTGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgIHVpZDogaXRlbS5pZCwKICAgICAgICAgICAgICAgIG5hbWU6IDxhLXRvb2x0aXA+PHRlbXBsYXRlIHNsb3Q9InRpdGxlIj57J+eCueWHu+S4i+i9veaWh+S7tid9PC90ZW1wbGF0ZT57aXRlbS5maWxlUmVhbG5hbWV9PC9hLXRvb2x0aXA+LAogICAgICAgICAgICAgICAgc3RhdHVzOiAnZG9uZScsCiAgICAgICAgICAgICAgICB1cmw6IHNlbGYuZGVmYXVsdEFjdGlvbiwKICAgICAgICAgICAgICAgIHRodW1iVXJsOiBwcmVmaXguT1BFTl9VUkxfUFJFRklYICsgaXRlbS5maWxlUGF0aCwKICAgICAgICAgICAgICAgIHJlc3BvbnNlOiB7IGZpbGVJZDogaXRlbS5pZCB9LAogICAgICAgICAgICAgICAgbGlua1Byb3BzOiB7IGRvd25sb2FkOiAnY3VycmVudCcgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgICAvLyByZXMuZGF0YS5zb21lKChpdGVtLCBpKSA9PiB7CiAgICAgICAgICAvLyAgIHNlbGYuc0ZpbGVMaXN0LnB1c2goewogICAgICAgICAgLy8gICAgIHVpZDogaXRlbS5pZCwKICAgICAgICAgIC8vICAgICBuYW1lOiBpdGVtLmZpbGVSZWFsbmFtZSwKICAgICAgICAgIC8vICAgICBzdGF0dXM6ICdkb25lJywKICAgICAgICAgIC8vICAgICByZXNwb25zZTogeyBmaWxlSWQ6IGl0ZW0uaWQgfSwKICAgICAgICAgIC8vICAgICBsaW5rUHJvcHM6IHsgZG93bmxvYWQ6ICdjdXJyZW50JyB9CiAgICAgICAgICAvLyAgIH0pCiAgICAgICAgICAvLyB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBhc3luYyBmaWxlRGVsZXRlIChpbmZvKSB7CiAgICAgIC8vIOWIoOmZpAogICAgICBhd2FpdCBkZWxUU3lzRmlsZSh7IGZpbGVJZDogaW5mby5yZXNwb25zZS5maWxlSWQsIGRlbGV0ZTogdHJ1ZSB9KQogICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgdGhpcy5zRmlsZUxpc3QgPSB0aGlzLnNGaWxlTGlzdC5maWx0ZXIoZmlsZSA9PiBmaWxlLnJlc3BvbnNlLmZpbGVJZCAhPT0gaW5mby5yZXNwb25zZS5maWxlSWQpCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJykKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyB8fCAn5Yig6Zmk5aSx6LSlJykKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfns7vnu5/plJnor6/vvIzor7fnqI3lkI7lho3or5UnKQogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgIH0pCiAgICB9LAogICAgYmVmb3JlVXBsb2FkIChmaWxlLCBmaWxlTGlzdCkgewogICAgICBjb25zdCBpc0FjY2VwdFR5cGUgPSB0aGlzLnR5cGVNYXRjaChmaWxlLnR5cGUpCiAgICAgIGlmICghaXNBY2NlcHRUeXBlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihg5paH5Lu257G75Z6L6ZmQ5Yi25Li6ICR7dGhpcy5hY2NlcHRUeXBlfSFgKQogICAgICB9CiAgICAgIGNvbnN0IGxlc3NUaGFuTWF4U2l6ZSA9ICF0aGlzLm1heFNpemUgfHwgKHRoaXMubWF4U2l6ZSAmJiBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IHRoaXMubWF4U2l6ZSkKICAgICAgaWYgKCFsZXNzVGhhbk1heFNpemUpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGDmlofku7blpKflsI/pmZDliLbkuLogJHt0aGlzLm1heFNpemV9TUIhYCkKICAgICAgfQogICAgICByZXR1cm4gaXNBY2NlcHRUeXBlICYmIGxlc3NUaGFuTWF4U2l6ZQogICAgfSwKICAgIHR5cGVNYXRjaCAoZmlsZVR5cGUpIHsKICAgICAgaWYgKHRoaXMuYWNjZXB0VHlwZSA9PT0gJyonIHx8IHRoaXMuYWNjZXB0VHlwZSA9PT0gJyovKicpIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIGNvbnN0IGFjY2VwdCA9IHRoaXMuYWNjZXB0VHlwZS5zcGxpdCgnLCcpCiAgICAgIGNvbnN0IHR5cGUgPSBmaWxlVHlwZS5pbmRleE9mKCcvJykgPiAtMSA/IGZpbGVUeXBlLnNwbGl0KCcvJylbMV0gOiBmaWxlVHlwZQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjY2VwdC5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChhY2NlcHRbaV0gPT09IHR5cGUpIHsKICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZQogICAgfQogIH0KfQo="},{"version":3,"sources":["VenusUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VenusUpload.vue","sourceRoot":"src/components/pts/Upload","sourcesContent":["<template>\n  <a-upload :list-type=\"listType || 'text'\"\n            :multiple=\"multiple\"\n            :accept=\"accept\"\n            :method=\"method\"\n            :directory=\"directory\"\n            :customRequest=\"customRequest\"\n            :data=\"data\"\n            :disabled=\"disabled\"\n            :name=\"name\"\n            :previewFile=\"previewFile\"\n            :showUploadList=\"showUploadList\"\n            :supportServerRender=\"supportServerRender\"\n            :withCredentials=\"withCredentials\"\n            :openFileDialogOnClick=\"openFileDialogOnClick\"\n            :transformFile=\"transformFile\"\n            :headers=\"headers\"\n            :fileList=\"sFileList\"\n            :action=\"action || defaultAction\"\n            @change=\"fileChange\"\n            @download=\"download\"\n            @preview=\"filePreview\"\n            @reject=\"reject\"\n            :beforeUpload=\"beforeUpload\"\n            :remove=\"fileDelete\"\n            class=\"venus-upload\">\n    <a-button v-if=\"!maxLength || (maxLength && sFileList.length < maxLength)\"\n              :disabled=\"disabled\"\n              v-show=\"!disabledUpload\">\n      <a-icon type=\"upload\" />点击上传\n      <!-- <a-input :value=\"UUID\" @change=\"handleChange\" class=\"busId\"></a-input> -->\n    </a-button>\n  </a-upload>\n</template>\n\n<script>\n/**\n *  作者：姚正超\n *  描述：V1.0版本，请勿随意乱更改组件\n *  日期：2020年5月9日\n */\nimport { Upload as U } from 'ant-design-vue'\nimport { UUIDTSysSerialNumber } from '@/api/pts/sys/TSysSerialNumber'\nimport { ACCESS_TOKEN } from '@/store/mutation-types'\nimport Vue from 'vue'\nimport { downloadTSysFile, initTSysFileList, delTSysFile } from '@/api/pts/sys/TSysFile'\nimport prefix from '@/config/prefix'\n\nexport default {\n  name: 'VenusUpload',\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  props: Object.assign({}, U.props, {\n    headers: {\n      type: Object,\n      default: function () {\n        return { token: Vue.ls.get(ACCESS_TOKEN) }\n      }\n    },\n    action: {\n      type: String,\n      default: ''\n    },\n    // 文件类型限制\n    acceptType: {\n      type: String,\n      default: '*'\n    },\n    // 文件大小限制\n    maxSize: {\n      type: Number,\n      default: undefined\n    },\n    // 最大列表长度，如上传多个文件此属性必须存在\n    maxLength: {\n      type: Number,\n      default: undefined\n    },\n    // 由于antd => Form表单组件限制所加属性，无需关注\n    value: {\n      type: String,\n      default: ''\n    },\n    // 是否上传到静态资源开放路径\n    isOpen: {\n      type: [Boolean, String],\n      default: false\n    },\n    // 上传成功的回调方法\n    uploadSuccess: {\n      // type: Function\n    },\n    // 上传成功的回调方法\n    uploadError: {\n      // type: Function\n    },\n    disabledUpload: {\n      type: Boolean,\n      default: false\n    }\n  }),\n  data () {\n    const value = !this.value || this.value === 0 || this.value === '0' ? '' : this.value\n    if (this.disabledUpload && this.disabled && this.value && this.value !== '0') {\n      this.UUID = value\n      this.sFileList = []\n      this.initUpload()\n    }\n    return {\n      sFileList: [],\n      UUID: value\n      // busId: value\n    }\n  },\n  computed: {\n    defaultAction: function () {\n      const busId = this.UUID || this.value\n      return process.env.VUE_APP_API_BASE_URL + '/pts/sys/TSysFile/upload?busId=' + busId + '&isOpen=' + this.matchOpen\n    },\n    matchOpen: function () {\n      return this.isOpen === true || this.isOpen === 'true' ? 1 : 0\n    }\n  },\n  // async mounted() {\n  //   this.UUID = this.value\n  // },\n  beforeDestroy () {\n    this.sFileList = []\n  },\n  watch: {\n    value (val = '') {\n      if ((!val || val === '0') && !this.disabledUpload) {\n        this.sFileList = []\n        this.handleUUID()\n      } else if ((this.UUID && this.UUID !== val) || !this.UUID) {\n        this.UUID = val\n        this.sFileList = []\n        this.initUpload()\n      }\n    }\n  },\n  created () { },\n  methods: {\n    triggerChange (e) {\n      // Should provide an event to pass value to Form.\n      this.$emit('change', this.UUID)\n    },\n    async handleUUID () {\n      await UUIDTSysSerialNumber().then(res => {\n        if (res.code === 0) {\n          this.UUID = res.data\n        } else {\n          console.log(new Error('获取busId失败'))\n          this.$message.error('上传组件出现意外错误')\n        }\n      })\n    },\n    handleChange (e) {\n      this.$emit('change', e.target.value)\n    },\n    fileChange ({ file, fileList }) {\n      if (file.status !== 'uploading') {\n      }\n      if (file.status === 'done') {\n        // this.initUpload()\n        if (file.response.code === 0) {\n          fileList.map(el => {\n            if (el.uid === file.uid) {\n              el['linkProps'] = { download: 'current' }\n            }\n            return el\n          })\n          this.$message.success(`${file.name} 文件上传成功`)\n          this.$emit('success', file.response)\n          // }\n        } else {\n          fileList.map(el => {\n            if (el.uid === file.uid) {\n              el['linkProps'] = { download: 'current' }\n            }\n            return el\n          })\n          this.$message.error(`${file.name} 文件上传失败` + file.response.msg)\n          this.$emit('error', file.response)\n        }\n      } else if (file.status === 'error') {\n        fileList.map(el => {\n          if (el.uid === file.uid) {\n            el['linkProps'] = { download: 'current' }\n          }\n          return el\n        })\n        this.$message.error(`${file.name} 文件上传失败`)\n        this.$emit('error', file.response)\n      }\n      if (file.status !== undefined) {\n        this.sFileList = fileList\n        this.triggerChange()\n      }\n    },\n    filePreview (file) {\n      if (file.status === 'done') {\n        if (file.linkProps.download === 'error') {\n          this.$message.error(`${file.name} 文件上传失败，无法下载`)\n        } else {\n          downloadTSysFile({ fileId: file.response.fileId, delete: false })\n        }\n      } else {\n        this.$message.error(`${file.name} 文件下载出现错误`)\n      }\n    },\n    initUpload () {\n      const self = this\n      initTSysFileList({ busId: this.value }).then(res => {\n        if (res.code === 0) {\n          // console.log('文件列表初始化开始-------------')\n          if (self.listType === 'text' && this.matchOpen === 1) {\n            res.data.some((item, i) => {\n              self.sFileList.push({\n                uid: item.id,\n                name: <a-tooltip><template slot=\"title\">{'点击下载文件'}</template>{item.fileRealname}</a-tooltip>,\n                status: 'done',\n                response: { fileId: item.id },\n                linkProps: { download: 'current' }\n              })\n            })\n          } else {\n            res.data.some((item, i) => {\n              self.sFileList.push({\n                uid: item.id,\n                name: <a-tooltip><template slot=\"title\">{'点击下载文件'}</template>{item.fileRealname}</a-tooltip>,\n                status: 'done',\n                url: self.defaultAction,\n                thumbUrl: prefix.OPEN_URL_PREFIX + item.filePath,\n                response: { fileId: item.id },\n                linkProps: { download: 'current' }\n              })\n            })\n          }\n          // res.data.some((item, i) => {\n          //   self.sFileList.push({\n          //     uid: item.id,\n          //     name: item.fileRealname,\n          //     status: 'done',\n          //     response: { fileId: item.id },\n          //     linkProps: { download: 'current' }\n          //   })\n          // })\n        }\n      })\n    },\n    async fileDelete (info) {\n      // 删除\n      await delTSysFile({ fileId: info.response.fileId, delete: true })\n        .then(res => {\n          if (res.code === 0) {\n            this.sFileList = this.sFileList.filter(file => file.response.fileId !== info.response.fileId)\n            this.$message.success('删除成功')\n          } else {\n            this.$message.error(res.msg || '删除失败')\n          }\n        })\n        .catch(() => {\n          this.$message.error('系统错误，请稍后再试')\n        })\n        .finally(() => {\n        })\n    },\n    beforeUpload (file, fileList) {\n      const isAcceptType = this.typeMatch(file.type)\n      if (!isAcceptType) {\n        this.$message.error(`文件类型限制为 ${this.acceptType}!`)\n      }\n      const lessThanMaxSize = !this.maxSize || (this.maxSize && file.size / 1024 / 1024 < this.maxSize)\n      if (!lessThanMaxSize) {\n        this.$message.error(`文件大小限制为 ${this.maxSize}MB!`)\n      }\n      return isAcceptType && lessThanMaxSize\n    },\n    typeMatch (fileType) {\n      if (this.acceptType === '*' || this.acceptType === '*/*') {\n        return true\n      }\n      const accept = this.acceptType.split(',')\n      const type = fileType.indexOf('/') > -1 ? fileType.split('/')[1] : fileType\n      for (let i = 0; i < accept.length; i++) {\n        if (accept[i] === type) {\n          return true\n        }\n      }\n      return false\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.busId {\n  display: none;\n  width: 0px;\n  height: 0px;\n}\n.venus-upload {\n  cursor: pointer;\n}\n.ant-upload .ant-upload-list .ant-upload-list-item .ant-upload-list-item {\n  height: 40px;\n}\n// .venus-upload {\n//   .ant-upload-list-item-card-actions {\n//     opacity: 1;\n//   }\n// }\n</style>\n"]}]}