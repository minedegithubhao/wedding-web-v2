{"remainingRequest":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/Editor/QuillEditor.vue?vue&type=style&index=0&id=9b84fd80&lang=less&scoped=true&","dependencies":[{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/Editor/QuillEditor.vue","mtime":1605568762399},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0IHVybCgnLi4vaW5kZXgubGVzcycpOwovKiDopobnm5YgcXVpbGwg6buY6K6k6L655qGG5ZyG6KeS5Li6IGFudCDpu5jorqTlnIbop5LvvIznlKjkuo7nu5/kuIAgYW50IOe7hOS7tumjjuagvCAqLwouYW50LWVkaXRvci1xdWlsbCB7CiAgL2RlZXAvIC5xbC10b29sYmFyLnFsLXNub3cgewogICAgYm9yZGVyLXJhZGl1czogQGJvcmRlci1yYWRpdXMtYmFzZSBAYm9yZGVyLXJhZGl1cy1iYXNlIDAgMDsKICB9CiAgL2RlZXAvIC5xbC1jb250YWluZXIucWwtc25vdyB7CiAgICBib3JkZXItcmFkaXVzOiAwIDAgQGJvcmRlci1yYWRpdXMtYmFzZSBAYm9yZGVyLXJhZGl1cy1iYXNlOwogIH0KfQovL+ino+WGs+Wbvuagh+agt+W8j+mUmeS5sSBodHRwczovL2Jsb2cuY3Nkbi5uZXQvcXFfMjcyOTU0MDMvYXJ0aWNsZS9kZXRhaWxzLzk2NDgyMTk4Ci5xbC1lZGl0b3ItY2xhc3MgewogICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIGxpbmUtaGVpZ2h0OiAxLjQyOwogICAgaGVpZ2h0OiAxMDAlOwogICAgb3V0bGluZTogbm9uZTsKICAgIHBhZGRpbmc6IDAgIWltcG9ydGFudDsKICAgIHRhYi1zaXplOiA0OwogICAgLW1vei10YWItc2l6ZTogNDsKICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7Cn0K"},{"version":3,"sources":["QuillEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"QuillEditor.vue","sourceRoot":"src/components/Editor","sourcesContent":["<template>\n  <div :class=\"prefixCls\">\n    <a-upload\n      class=\"avatar-uploader quill-img\"\n      name=\"file\"\n      :multiple=\"true\"\n      action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\n      :headers=\"headers\"\n      @change=\"quillImgSuccess\"\n      :beforeUpload=\"quillImgBefore\"\n    >\n    </a-upload>\n    <quill-editor\n      class=\"ql-editor-class\"\n      v-model=\"content\"\n      ref=\"myQuillEditor\"\n      :options=\"editorOption\"\n      @blur=\"onEditorBlur($event)\"\n      @focus=\"onEditorFocus($event)\"\n      @ready=\"onEditorReady($event)\"\n      @change=\"onEditorChange($event)\">\n    </quill-editor>\n\n  </div>\n</template>\n\n<script>\n\n// 工具栏配置\nimport 'quill/dist/quill.core.css'\nimport 'quill/dist/quill.snow.css'\nimport 'quill/dist/quill.bubble.css'\n\nimport { quillEditor } from 'vue-quill-editor'\n\nconst toolbarOptions = [\n  ['bold', 'italic', 'underline', 'strike'], // 加粗 斜体 下划线 删除线\n  ['blockquote', 'code-block'], // 引用  代码块\n  [{ list: 'ordered' }, { list: 'bullet' }], // 有序、无序列表\n  [{ 'script': 'sub' }, { 'script': 'super' }],\n  [{ indent: '-1' }, { indent: '+1' }], // 缩进\n  [{ 'direction': 'rtl' }],\n  [{ size: ['small', false, 'large', 'huge'] }], // 字体大小\n  [{ header: [1, 2, 3, 4, 5, 6, false] }], // 标题\n  [{ color: [] }, { background: [] }], // 字体颜色、字体背景颜色\n  [{ 'font': [] }],\n  [{ align: [] }], // 对齐方式\n  ['link', 'image', 'video'], // 链接、图片、视频\n  ['clean'] // 清除文本格式\n]\nfunction getBase64 (img, callback) {\n  const reader = new FileReader()\n  reader.addEventListener('load', () => callback(reader.result))\n  reader.readAsDataURL(img)\n}\nexport default {\n  name: 'QuillEditor',\n  components: {\n    quillEditor\n  },\n  props: {\n    prefixCls: {\n      type: String,\n      default: 'ant-editor-quill'\n    },\n    // 表单校验用字段\n    // eslint-disable-next-line\n    value: {\n      type: String\n    }\n  },\n  data () {\n    return {\n      content: this.value,\n      editorOption: {\n        theme: 'snow', // or 'bubble'\n        placeholder: '请输入内容',\n        modules: {\n          toolbar: {\n            container: toolbarOptions,\n            handlers: {\n              image: function (value) {\n                if (value) {\n                  // 触发input框选择图片文件\n                  document.querySelector('.quill-img input').click()\n                } else {\n                  this.quill.format('image', false)\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n\n  methods: {\n    onEditorBlur (quill) {\n      console.log('editor blur!', quill)\n    },\n    onEditorFocus (quill) {\n      console.log('editor focus!', quill)\n    },\n    onEditorReady (quill) {\n      console.log('editor ready!', quill)\n    },\n    onEditorChange ({ quill, html, text }) {\n      console.log('editor change!', quill, html, text)\n      this.$emit('change', html)\n    },\n    // 富文本图片上传前\n    quillImgBefore (file) {\n      const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\n      if (!isJpgOrPng) {\n        this.$message.error('请插入图片类型文件(jpg/jpeg/png)')\n      }\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isLt2M) {\n        this.$message.error('Image must smaller than 2MB!')\n      }\n      return isJpgOrPng && isLt2M\n    },\n\n    quillImgSuccess (info) {\n      if (info.file.status === 'done') {\n        // 获取富文本组件实例\n        const quill = this.$refs.myQuillEditor.quill\n        // Get this url from response in real world.\n        getBase64(info.file.originFileObj, imageUrl => {\n          // 获取光标所在位置\n          const length = quill.getSelection().index\n          // 插入图片  res.url为服务器返回的图片地址\n          quill.insertEmbed(length, 'image', imageUrl)\n          // 调整光标到最后\n          quill.setSelection(length + 1)\n        })\n        // 下面是服务上传真实url操作\n        // // 如果上传成功\n        // if (info.response.code === 0) {\n        //   // 获取光标所在位置\n        //   const length = quill.getSelection().index\n        //   // 插入图片  res.url为服务器返回的图片地址\n        //   quill.insertEmbed(length, 'image', info.response.url)\n        //   // 调整光标到最后\n        //   quill.setSelection(length + 1)\n        // }\n      }\n    }\n  },\n  watch: {\n    value: function (val) {\n      this.content = val\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import url('../index.less');\n/* 覆盖 quill 默认边框圆角为 ant 默认圆角，用于统一 ant 组件风格 */\n.ant-editor-quill {\n  /deep/ .ql-toolbar.ql-snow {\n    border-radius: @border-radius-base @border-radius-base 0 0;\n  }\n  /deep/ .ql-container.ql-snow {\n    border-radius: 0 0 @border-radius-base @border-radius-base;\n  }\n}\n//解决图标样式错乱 https://blog.csdn.net/qq_27295403/article/details/96482198\n.ql-editor-class {\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    line-height: 1.42;\n    height: 100%;\n    outline: none;\n    padding: 0 !important;\n    tab-size: 4;\n    -moz-tab-size: 4;\n    text-align: left;\n    word-wrap: break-word;\n}\n</style>\n<style>\n.editor {\n  line-height: normal !important;\n  height: 192px;\n}\n.quill-img {\n  display: none;\n}\n.ql-snow .ql-tooltip[data-mode=\"link\"]::before {\n  content: \"请输入链接地址:\";\n}\n.ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n  border-right: 0px;\n  content: \"保存\";\n  padding-right: 0px;\n}\n\n.ql-snow .ql-tooltip[data-mode=\"video\"]::before {\n  content: \"请输入视频地址:\";\n}\n\n.ql-snow .ql-picker.ql-size .ql-picker-label::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item::before {\n  content: \"14px\";\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=\"small\"]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=\"small\"]::before {\n  content: \"10px\";\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=\"large\"]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=\"large\"]::before {\n  content: \"18px\";\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=\"huge\"]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=\"huge\"]::before {\n  content: \"32px\";\n}\n\n.ql-snow .ql-picker.ql-header .ql-picker-label::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item::before {\n  content: \"文本\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"1\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before {\n  content: \"标题1\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"2\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before {\n  content: \"标题2\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"3\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before {\n  content: \"标题3\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"4\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before {\n  content: \"标题4\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"5\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"5\"]::before {\n  content: \"标题5\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"6\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"6\"]::before {\n  content: \"标题6\";\n}\n\n.ql-snow .ql-picker.ql-font .ql-picker-label::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item::before {\n  content: \"标准字体\";\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=\"serif\"]::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=\"serif\"]::before {\n  content: \"衬线字体\";\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=\"monospace\"]::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=\"monospace\"]::before {\n  content: \"等宽字体\";\n}\n</style>\n"]}]}