{"remainingRequest":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/GlobalHeader/GlobalHeader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/GlobalHeader/GlobalHeader.vue","mtime":1605568762405},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVc2VyTWVudSBmcm9tICcuLi90b29scy9Vc2VyTWVudScKaW1wb3J0IFNNZW51IGZyb20gJy4uL01lbnUvJwppbXBvcnQgVG9wTWVudSBmcm9tICdAL2NvbXBvbmVudHMvcHRzL1RvcE1lbnUnCmltcG9ydCBMb2dvIGZyb20gJy4uL3Rvb2xzL0xvZ28nCmltcG9ydCB7IG1peGluIH0gZnJvbSAnQC91dGlscy9taXhpbicKaW1wb3J0IEhNZW51IGZyb20gJ0AvY29tcG9uZW50cy9wdHMvSG9yaXpvbnRhbE1lbnUvJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdHbG9iYWxIZWFkZXInLAogIGNvbXBvbmVudHM6IHsKICAgIFVzZXJNZW51LAogICAgU01lbnUsCiAgICBMb2dvLAogICAgSE1lbnUsCiAgICBUb3BNZW51CiAgfSwKICBtaXhpbnM6IFttaXhpbl0sCiAgcHJvcHM6IHsKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICAvLyBzaWRlbWVudSwgdG9wbWVudQogICAgICBkZWZhdWx0OiAnc2lkZW1lbnUnCiAgICB9LAogICAgbWVudXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgYWxsTWVudXM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGFsbFRvcE1lbnVzOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICB0b3BNZW51TGlzdDogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICB0aGVtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogJ2RhcmsnCiAgICB9LAogICAgY29sbGFwc2VkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBkZXZpY2U6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6ICdkZXNrdG9wJwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZpc2libGU6IHRydWUsCiAgICAgIG9sZFNjcm9sbFRvcDogMCwKICAgICAgdG9wTWVudVdpZHRoOiAwLAogICAgICBoZWFkZXJXaWR0aDogJzBweCcKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmhhbmRsZVNjcm9sbCwgeyBwYXNzaXZlOiB0cnVlIH0pCiAgICB0aGlzLmhlYWRlcldpZHRoID0gdGhpcy4kcmVmcy5oZWFkZXIuY2xpZW50V2lkdGgKICAgIC8vIOebkeWQrOeql+WPo+Wkp+WwjwogICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4gewogICAgICByZXR1cm4gKCgpID0+IHsKICAgICAgICB0aGlzLmhlYWRlcldpZHRoID0gdGhpcy4kcmVmcy5oZWFkZXIuY2xpZW50V2lkdGgKICAgICAgfSkoKQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsgfSwKICB3YXRjaDogewogICAgaGVhZGVyV2lkdGgodmFsKSB7CiAgICAgIGNvbnN0IHVzZXJNZW51ID0gdGhpcy4kcmVmcy51c2VyTWVudS4kZWwuY2xpZW50V2lkdGgKICAgICAgY29uc3QgaGVhZGVySWNvbiA9IHRoaXMubW9kZSA9PT0gJ3NpZGVtZW51JyA/IHRoaXMuJHJlZnMuaGVhZGVySWNvbi5jbGllbnRXaWR0aCA6IDAKCiAgICAgIHRoaXMudG9wTWVudVdpZHRoID0gdmFsIC0gdXNlck1lbnUgLSBoZWFkZXJJY29uICsgJ3B4JwogICAgfSwKICAgIGNvbGxhcHNlZCh2YWwpIHsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIGNvbnN0IHVzZXJNZW51ID0gdGhpcy4kcmVmcy51c2VyTWVudS4kZWwuY2xpZW50V2lkdGgKICAgICAgICBjb25zdCBoZWFkZXJJY29uID0gdGhpcy5tb2RlID09PSAnc2lkZW1lbnUnID8gdGhpcy4kcmVmcy5oZWFkZXJJY29uLmNsaWVudFdpZHRoIDogMAogICAgICAgIGlmICh2YWwpIHsKICAgICAgICAgIHRoaXMudG9wTWVudVdpZHRoID0gdGhpcy4kcmVmcy5oZWFkZXIub2Zmc2V0V2lkdGggLSB1c2VyTWVudSAtIGhlYWRlckljb24gLSA4MCArIDI1NiArICdweCcKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy50b3BNZW51V2lkdGggPSB0aGlzLiRyZWZzLmhlYWRlci5vZmZzZXRXaWR0aCAtIHVzZXJNZW51IC0gaGVhZGVySWNvbiAtIDE3NiArICdweCcKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVTY3JvbGwoKSB7CiAgICAgIGlmICghdGhpcy5hdXRvSGlkZUhlYWRlcikgewogICAgICAgIHJldHVybgogICAgICB9CgogICAgICBjb25zdCBzY3JvbGxUb3AgPSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AKICAgICAgaWYgKCF0aGlzLnRpY2tpbmcpIHsKICAgICAgICB0aGlzLnRpY2tpbmcgPSB0cnVlCiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHsKICAgICAgICAgIGlmICh0aGlzLm9sZFNjcm9sbFRvcCA+IHNjcm9sbFRvcCkgewogICAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlCiAgICAgICAgICB9IGVsc2UgaWYgKHNjcm9sbFRvcCA+IDMwMCAmJiB0aGlzLnZpc2libGUpIHsKICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2UKICAgICAgICAgIH0gZWxzZSBpZiAoc2Nyb2xsVG9wIDwgMzAwICYmICF0aGlzLnZpc2libGUpIHsKICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5vbGRTY3JvbGxUb3AgPSBzY3JvbGxUb3AKICAgICAgICAgIHRoaXMudGlja2luZyA9IGZhbHNlCiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIHRvZ2dsZSgpIHsKICAgICAgdGhpcy4kZW1pdCgndG9nZ2xlJykKICAgIH0sCiAgICBoYW5kbGVTZWxlY3RUb3BNZW51KHRvcE1lbnUpIHsKICAgICAgdGhpcy4kZW1pdCgnaGFuZGxlLXNlbGVjdC10b3AtbWVudScsIHRvcE1lbnUpCiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmhhbmRsZVNjcm9sbCwgdHJ1ZSkKICB9Cn0K"},{"version":3,"sources":["GlobalHeader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GlobalHeader.vue","sourceRoot":"src/components/GlobalHeader","sourcesContent":["<template>\n  <transition name=\"showHeader\">\n    <div v-if=\"visible\"\n         class=\"header-animat\">\n      <h-menu v-if=\"device !== 'mobile' && layoutMode === 'topmenu'\"\n              class=\"page-header-menu\"\n              :className=\"[`content-width-${contentWidth}`]\"\n              mode=\"horizontal\"\n              slot=\"overlay\"\n              :menu=\"menus\"\n              theme=\"light\" />\n      <a-layout-header v-if=\"visible\"\n                       :class=\"[fixedHeader && 'ant-header-fixedHeader', sidebarOpened ? 'ant-header-side-opened' : 'ant-header-side-closed', theme ]\"\n                       :style=\"{ padding: '0' }\">\n        <div v-if=\"mode === 'sidemenu'\"\n             class=\"header\"\n             :class=\"theme\">\n          <div ref=\"header\">\n            <a-icon v-if=\"device==='mobile'\"\n                    class=\"trigger\"\n                    :type=\"collapsed ? 'menu-fold' : 'menu-unfold'\"\n                    @click=\"toggle\"\n                    style=\"float:left\"\n                    ref=\"headerIcon\" />\n            <a-icon v-else\n                    class=\"trigger\"\n                    :type=\"collapsed ? 'menu-unfold' : 'menu-fold'\"\n                    @click=\"toggle\"\n                    style=\"float:left\"\n                    ref=\"headerIcon\" />\n            <top-menu :top-menu-list=\"topMenuList\"\n                      :all-top-menus=\"allTopMenus\"\n                      @click=\"handleSelectTopMenu\"\n                      :style=\"{maxWidth: topMenuWidth}\"></top-menu>\n            <user-menu ref=\"userMenu\"\n                       :theme=\"theme\"></user-menu>\n          </div>\n        </div>\n        <div v-else\n             :class=\"['top-nav-header-index', theme]\">\n          <div class=\"header-index-wide\"\n               ref=\"header\">\n            <div class=\"header-index-left\">\n              <logo class=\"top-nav-header\"\n                    :show-title=\"device !== 'mobile'\" />\n              <!-- <s-menu v-if=\"device !== 'mobile'\" mode=\"horizontal\" :menu=\"menus\" :theme=\"theme\" /> -->\n              <top-menu :top-menu-list=\"topMenuList\"\n                        @click=\"handleSelectTopMenu\"\n                        :style=\"{maxWidth: topMenuWidth}\"\n                        :sub-menus=\"allMenus\"\n                        :all-top-menus=\"allTopMenus\"\n                        :theme=\"theme\"\n                        :mode=\"mode\"></top-menu>\n              <a-icon v-if=\"device === 'mobile'\"\n                      class=\"trigger\"\n                      :type=\"collapsed ? 'menu-fold' : 'menu-unfold'\"\n                      @click=\"toggle\" />\n            </div>\n            <user-menu class=\"header-index-right\"\n                       ref=\"userMenu\"\n                       :theme=\"theme\"></user-menu>\n          </div>\n        </div>\n      </a-layout-header>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport UserMenu from '../tools/UserMenu'\nimport SMenu from '../Menu/'\nimport TopMenu from '@/components/pts/TopMenu'\nimport Logo from '../tools/Logo'\nimport { mixin } from '@/utils/mixin'\nimport HMenu from '@/components/pts/HorizontalMenu/'\n\nexport default {\n  name: 'GlobalHeader',\n  components: {\n    UserMenu,\n    SMenu,\n    Logo,\n    HMenu,\n    TopMenu\n  },\n  mixins: [mixin],\n  props: {\n    mode: {\n      type: String,\n      // sidemenu, topmenu\n      default: 'sidemenu'\n    },\n    menus: {\n      type: Array,\n      required: true\n    },\n    allMenus: {\n      type: Object,\n      required: true\n    },\n    allTopMenus: {\n      type: Object,\n      required: true\n    },\n    topMenuList: {\n      type: Array,\n      required: true\n    },\n    theme: {\n      type: String,\n      required: false,\n      default: 'dark'\n    },\n    collapsed: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n    device: {\n      type: String,\n      required: false,\n      default: 'desktop'\n    }\n  },\n  data() {\n    return {\n      visible: true,\n      oldScrollTop: 0,\n      topMenuWidth: 0,\n      headerWidth: '0px'\n    }\n  },\n  mounted() {\n    document.addEventListener('scroll', this.handleScroll, { passive: true })\n    this.headerWidth = this.$refs.header.clientWidth\n    // 监听窗口大小\n    window.onresize = () => {\n      return (() => {\n        this.headerWidth = this.$refs.header.clientWidth\n      })()\n    }\n  },\n  created() { },\n  watch: {\n    headerWidth(val) {\n      const userMenu = this.$refs.userMenu.$el.clientWidth\n      const headerIcon = this.mode === 'sidemenu' ? this.$refs.headerIcon.clientWidth : 0\n\n      this.topMenuWidth = val - userMenu - headerIcon + 'px'\n    },\n    collapsed(val) {\n      this.$nextTick(() => {\n        const userMenu = this.$refs.userMenu.$el.clientWidth\n        const headerIcon = this.mode === 'sidemenu' ? this.$refs.headerIcon.clientWidth : 0\n        if (val) {\n          this.topMenuWidth = this.$refs.header.offsetWidth - userMenu - headerIcon - 80 + 256 + 'px'\n        } else {\n          this.topMenuWidth = this.$refs.header.offsetWidth - userMenu - headerIcon - 176 + 'px'\n        }\n      })\n    }\n  },\n  methods: {\n    handleScroll() {\n      if (!this.autoHideHeader) {\n        return\n      }\n\n      const scrollTop = document.body.scrollTop + document.documentElement.scrollTop\n      if (!this.ticking) {\n        this.ticking = true\n        requestAnimationFrame(() => {\n          if (this.oldScrollTop > scrollTop) {\n            this.visible = true\n          } else if (scrollTop > 300 && this.visible) {\n            this.visible = false\n          } else if (scrollTop < 300 && !this.visible) {\n            this.visible = true\n          }\n          this.oldScrollTop = scrollTop\n          this.ticking = false\n        })\n      }\n    },\n    toggle() {\n      this.$emit('toggle')\n    },\n    handleSelectTopMenu(topMenu) {\n      this.$emit('handle-select-top-menu', topMenu)\n    }\n  },\n  beforeDestroy() {\n    document.body.removeEventListener('scroll', this.handleScroll, true)\n  }\n}\n</script>\n\n<style lang=\"less\">\n@import '../index.less';\n.header-animat {\n  position: relative;\n  z-index: @ant-global-header-zindex;\n}\n.showHeader-enter-active {\n  transition: all 0.25s ease;\n}\n.showHeader-leave-active {\n  transition: all 0.5s ease;\n}\n.showHeader-enter,\n.showHeader-leave-to {\n  opacity: 0;\n}\n</style>\n"]}]}