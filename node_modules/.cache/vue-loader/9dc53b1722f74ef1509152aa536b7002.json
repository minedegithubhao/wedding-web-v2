{"remainingRequest":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/pts/WebShell/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/pts/WebShell/index.vue","mtime":1605568762426},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBXaW5kb3dTaGVsbCBmcm9tICcuL3dpbmRvdy52dWUnCmltcG9ydCBMb2dvIGZyb20gJ0AvY29tcG9uZW50cy90b29scy9Mb2dvJwppbXBvcnQgU2NyZWVuc2hvdCBmcm9tICdAL2NvbXBvbmVudHMvcHRzL1NjcmVlbnNob3QvaW5kZXgudnVlJwppbXBvcnQgQWRkU2Vzc2lvbiBmcm9tICcuL2FkZFNlc3Npb24udnVlJwppbXBvcnQgTXVsdGlUYWIgZnJvbSAnLi9NdWx0aVRhYicKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnV2ViU2hlbGwnLAogIGNvbXBvbmVudHM6IHsKICAgIFdpbmRvd1NoZWxsLAogICAgTG9nbywKICAgIFNjcmVlbnNob3QsCiAgICBBZGRTZXNzaW9uLAogICAgTXVsdGlUYWIKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiAnV2ViU2hlbGwnLAogICAgICBzZXNzaW9uV2luZG93OiB0cnVlLAogICAgICBzZXNzaW9uTWFzazogZmFsc2UsCiAgICAgIGRyYXdlcldpZHRoOiAnMTg1cHgnLAogICAgICBzZWxlY3RLZXk6ICcnLAogICAgICBzZWxlY3RSb3c6IHt9LAogICAgICBzZXNzaW9uTGlzdDogWwogICAgICAgIHsKICAgICAgICAgIGlkOiAnMScsCiAgICAgICAgICBuYW1lOiAnMTkyLjE2OC4xLjIzMScsCiAgICAgICAgICBpcDogJzE5Mi4xNjguMS4yMzEnLAogICAgICAgICAgcG9ydDogJzIyJywKICAgICAgICAgIHVzZXJuYW1lOiAncm9vdCcsCiAgICAgICAgICBwYXNzd29yZDogJ3hhLTExJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaWQ6ICcyJywKICAgICAgICAgIG5hbWU6ICcxOTIuMTY4LjEuMjMzJywKICAgICAgICAgIGlwOiAnMTkyLjE2OC4xLjIzMycsCiAgICAgICAgICBwb3J0OiAnMjInLAogICAgICAgICAgdXNlcm5hbWU6ICdyb290JywKICAgICAgICAgIHBhc3N3b3JkOiAneGEtMTEnCiAgICAgICAgfQogICAgICBdCiAgICB9CiAgfSwKICBjb21wdXRlZDoge30sCiAgd2F0Y2g6IHt9LAogIGNyZWF0ZWQoKSB7fSwKICBtb3VudGVkKCkge30sCiAgYmVmb3JlRGVzdHJveSgpIHt9LAogIG1ldGhvZHM6IHsKICAgIG9wZW5TZXNzaW9uQ29ubmVjdChyb3cpIHsKICAgICAgdGhpcy4kcmVmcy5zZXNzaW9uVGFiLm9wZW4ocm93KQogICAgfSwKICAgIGNsb3NlU2Vzc2lvbkNvbm5lY3Qocm93KSB7CiAgICAgIHRoaXMuJHJlZnMuc2Vzc2lvblRhYi5jbG9zZShyb3cuaWQpCiAgICB9LAogICAgc2VsZWN0U2Vzc2lvbihyb3cpIHsKICAgICAgdGhpcy5zZWxlY3RLZXkgPSByb3cuaWQKICAgICAgdGhpcy5zZWxlY3RSb3cgPSByb3cKICAgIH0sCiAgICBhZGRTZXNzaW9uKCkgewogICAgICB0aGlzLiRyZWZzLnNlc3Npb25Nb2RlbC5hZGQoKQogICAgfSwKICAgIGVkaXRTZXNzaW9uKHJvdykgewogICAgICB0aGlzLiRyZWZzLnNlc3Npb25Nb2RlbC5lZGl0KHJvdykKICAgIH0sCiAgICBkZWxldGVTZXNzaW9uKHJvdykgewogICAgICBjb25zdCBzZWxmID0gdGhpcwogICAgICB0aGlzLiRjb25maXJtKHsKICAgICAgICB0aXRsZTogJ+aPkOekuicsCiAgICAgICAgY29udGVudDogPHNwYW4+56Gu5a6a6KaB5Yig6ZmkPHNwYW4gc3R5bGU9ImNvbG9yOiByZWQiPntyb3cubmFtZX08L3NwYW4+5Lya6K+d5ZCX77yfPC9zcGFuPiwKICAgICAgICBva1RleHQ6ICfliKDpmaQnLAogICAgICAgIGNhbmNlbFRleHQ6ICflj5bmtognLAogICAgICAgIG9uT2soKSB7CiAgICAgICAgICBzZWxmLnNlc3Npb25MaXN0ID0gc2VsZi5zZXNzaW9uTGlzdC5maWx0ZXIoaXRlbSA9PiBpdGVtLmlkICE9PSByb3cuaWQpCiAgICAgICAgICBzZWxmLmNsb3NlU2Vzc2lvbkNvbm5lY3Qocm93KQogICAgICAgICAgc2VsZi5zZWxlY3RSb3cgPSB7fQogICAgICAgICAgc2VsZi5zZWxlY3RLZXkgPSAnJwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVBbmRPayhyb3cpIHsKICAgICAgY29uc3Qgc2Vzc2lvbkxpc3QgPSB0aGlzLnNlc3Npb25MaXN0LmZpbHRlcihpdGVtID0+IGl0ZW0uaWQgIT09IHJvdy5pZCkKICAgICAgaWYgKHNlc3Npb25MaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLnNlc3Npb25MaXN0ID0gdGhpcy5zZXNzaW9uTGlzdC5tYXAoaXRlbSA9PiB7CiAgICAgICAgICBpZiAoaXRlbS5pZCA9PT0gcm93LmlkKSB7CiAgICAgICAgICAgIHJldHVybiByb3cKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBpdGVtCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICB0aGlzLnNlbGVjdFJvdyA9IHJvdwogICAgICAgIHRoaXMuY2xvc2VTZXNzaW9uQ29ubmVjdChyb3cpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZXNzaW9uTGlzdC5wdXNoKHJvdykKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVNjcmVlbnNob3QoKSB7CiAgICAgIHRoaXMuJHJlZnMuc2NyZWVuc2hvdC5jYXB0dXJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXJtaW5hbCcpKQogICAgfSwKICAgIHNob3dTZXNzaW9uV2luZG93KCkgewogICAgICB0aGlzLnNlc3Npb25XaW5kb3cgPSAhdGhpcy5zZXNzaW9uV2luZG93CiAgICB9LAogICAgY2xvc2VTZXNzaW9uV2luZG93KCkgewogICAgICB0aGlzLnNlc3Npb25XaW5kb3cgPSBmYWxzZQogICAgfSwKICAgIGhhbmRsZU1hc2soKSB7CiAgICAgIHRoaXMuc2Vzc2lvbk1hc2sgPSAhdGhpcy5zZXNzaW9uTWFzawogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/pts/WebShell","sourcesContent":["<template>\n  <div class=\"web-shell\">\n    <window-shell :show-title=\"false\" :show-drawer=\"sessionWindow\" :drawer-width=\"drawerWidth\" :multi-tab=\"true\">\n      <template v-slot:toolBar>\n        <div class=\"toolBar-container\">\n          <span @click=\"showSessionWindow\" class=\"toolBar-btn\"><a-icon :type=\"sessionWindow ? 'menu-fold' : 'menu-unfold'\" title=\"打开会话管理器\"/></span>\n          <a-dropdown overlay-class-name=\"toolBar-dropdown\" :trigger=\"['hover']\">\n            <span class=\"toolBar-btn ant-dropdown-link\">\n              <a-icon type=\"plus\" class=\"toolBar-icon\" />会话\n            </span>\n            <a-menu slot=\"overlay\">\n              <a-menu-item key=\"0\">\n                <a @click=\"addSession\"><span class=\"item-icon\"><a-icon type=\"plus\" class=\"toolBar-icon\" /></span>新建会话</a>\n              </a-menu-item>\n              <a-menu-item key=\"1\" :disabled=\"!selectKey\">\n                <a @click=\"() => editSession(selectRow)\"><span class=\"item-icon\"><a-icon type=\"folder-open\" class=\"toolBar-icon\" /></span>修改会话</a>\n              </a-menu-item>\n              <a-menu-divider />\n              <a-menu-item key=\"2\" :disabled=\"!selectKey\">\n                <a @click=\"() => deleteSession(selectRow)\"><span class=\"item-icon\"><a-icon type=\"delete\" class=\"toolBar-icon\" /></span>删除会话</a>\n              </a-menu-item>\n              <a-menu-divider />\n              <a-menu-item key=\"3\" :disabled=\"!selectKey\">\n                <a @click=\"() => openSessionConnect(selectRow)\"><span class=\"item-icon\"><a-icon type=\"folder-open\" class=\"toolBar-icon\" /></span>打开会话连接</a>\n              </a-menu-item>\n              <a-menu-item key=\"4\" :disabled=\"!selectKey\">\n                <a @click=\"() => closeSessionConnect(selectRow)\"><span class=\"item-icon\"><a-icon type=\"close\" class=\"toolBar-icon\" /></span>断开会话连接</a>\n              </a-menu-item>\n            </a-menu>\n          </a-dropdown>\n          <span @click=\"handleScreenshot\" class=\"toolBar-btn\">截图</span>\n        </div>\n      </template>\n      <template v-slot:sessionWindow>\n        <a-drawer\n          placement=\"left\"\n          :closable=\"true\"\n          :visible=\"sessionWindow\"\n          :get-container=\"false\"\n          :mask=\"sessionMask\"\n          :wrap-style=\"{ position: 'absolute' }\"\n          @close=\"closeSessionWindow\"\n          wrap-class-name=\"session-window\"\n          :width=\"185\"\n        >\n          <template slot=\"title\">\n            会话管理器\n            <a-icon type=\"pushpin\" class=\"pushpin\" :rotate=\"sessionMask ? 45 : -45\" @click=\"handleMask\"/>\n          </template>\n          <div v-for=\"(session, index) in sessionList\" :key=\"index\">\n            <a-dropdown overlay-class-name=\"toolBar-dropdown\" :trigger=\"['contextmenu']\">\n              <div class=\"session\" :class=\"{ 'active': session.id === selectKey }\" @dblclick=\"() => openSessionConnect(session)\" @click=\"() => selectSession(session)\">\n                <div title=\"双击连接会话\">{{ session.name }}</div>\n              </div>\n              <a-menu slot=\"overlay\">\n                <a-menu-item key=\"0\">\n                  <a @click=\"() => openSessionConnect(session)\"><span class=\"item-icon\"><a-icon type=\"plus\" class=\"toolBar-icon\" /></span>打开会话连接</a>\n                </a-menu-item>\n                <a-menu-item key=\"1\">\n                  <a @click=\"() => closeSessionConnect(session)\"><span class=\"item-icon\"><a-icon type=\"close\" class=\"toolBar-icon\" /></span>断开会话连接</a>\n                </a-menu-item>\n                <a-menu-divider />\n                <a-menu-item key=\"2\">\n                  <a @click=\"() => editSession(session)\"><span class=\"item-icon\"><a-icon type=\"folder-open\" class=\"toolBar-icon\" /></span>修改会话</a>\n                </a-menu-item>\n                <a-menu-item key=\"3\">\n                  <a @click=\"() => deleteSession(session)\"><span class=\"item-icon\"><a-icon type=\"delete\" class=\"toolBar-icon\" /></span>删除会话</a>\n                </a-menu-item>\n              </a-menu>\n            </a-dropdown>\n          </div>\n        </a-drawer>\n      </template>\n      <!-- <template v-slot:shellMultiTab> -->\n        <multi-tab ref=\"sessionTab\" :show-drawer=\"sessionWindow\" :drawer-width=\"drawerWidth\"></multi-tab>\n      <!-- </template> -->\n    </window-shell>\n    <add-session ref=\"sessionModel\" @ok=\"handleAndOk\"></add-session>\n    <screenshot ref=\"screenshot\" class=\"screenshot\" />\n  </div>\n</template>\n\n<script>\nimport WindowShell from './window.vue'\nimport Logo from '@/components/tools/Logo'\nimport Screenshot from '@/components/pts/Screenshot/index.vue'\nimport AddSession from './addSession.vue'\nimport MultiTab from './MultiTab'\n\nexport default {\n  name: 'WebShell',\n  components: {\n    WindowShell,\n    Logo,\n    Screenshot,\n    AddSession,\n    MultiTab\n  },\n  data() {\n    return {\n      name: 'WebShell',\n      sessionWindow: true,\n      sessionMask: false,\n      drawerWidth: '185px',\n      selectKey: '',\n      selectRow: {},\n      sessionList: [\n        {\n          id: '1',\n          name: '192.168.1.231',\n          ip: '192.168.1.231',\n          port: '22',\n          username: 'root',\n          password: 'xa-11'\n        },\n        {\n          id: '2',\n          name: '192.168.1.233',\n          ip: '192.168.1.233',\n          port: '22',\n          username: 'root',\n          password: 'xa-11'\n        }\n      ]\n    }\n  },\n  computed: {},\n  watch: {},\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  methods: {\n    openSessionConnect(row) {\n      this.$refs.sessionTab.open(row)\n    },\n    closeSessionConnect(row) {\n      this.$refs.sessionTab.close(row.id)\n    },\n    selectSession(row) {\n      this.selectKey = row.id\n      this.selectRow = row\n    },\n    addSession() {\n      this.$refs.sessionModel.add()\n    },\n    editSession(row) {\n      this.$refs.sessionModel.edit(row)\n    },\n    deleteSession(row) {\n      const self = this\n      this.$confirm({\n        title: '提示',\n        content: <span>确定要删除<span style=\"color: red\">{row.name}</span>会话吗？</span>,\n        okText: '删除',\n        cancelText: '取消',\n        onOk() {\n          self.sessionList = self.sessionList.filter(item => item.id !== row.id)\n          self.closeSessionConnect(row)\n          self.selectRow = {}\n          self.selectKey = ''\n        }\n      })\n    },\n    handleAndOk(row) {\n      const sessionList = this.sessionList.filter(item => item.id !== row.id)\n      if (sessionList.length > 0) {\n        this.sessionList = this.sessionList.map(item => {\n          if (item.id === row.id) {\n            return row\n          } else {\n            return item\n          }\n        })\n        this.selectRow = row\n        this.closeSessionConnect(row)\n      } else {\n        this.sessionList.push(row)\n      }\n    },\n    handleScreenshot() {\n      this.$refs.screenshot.capture(document.getElementById('terminal'))\n    },\n    showSessionWindow() {\n      this.sessionWindow = !this.sessionWindow\n    },\n    closeSessionWindow() {\n      this.sessionWindow = false\n    },\n    handleMask() {\n      this.sessionMask = !this.sessionMask\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@header-height: 32px;\n.web-shell {\n  position: relative;\n  .toolBar-container {\n    height: 100%;\n    display: inline-block;\n    user-select: none;\n    .toolBar-btn {\n      height: 100%;\n      display: inline-block;\n      line-height: @header-height;\n      padding: 0 10px;\n      color: #eeecec;\n      cursor: pointer;\n      &:hover {\n        background-color: rgba(255, 255, 255, 0.2);\n      }\n      .toolBar-icon {\n        margin-right: 4px;\n      }\n    }\n  }\n}\n.toolBar-dropdown {\n  .ant-dropdown-menu {\n    background-color: #3c3f41;\n    border-radius: 2px;\n    box-shadow: #1c1b1b 0px 0px 4px 0px;\n    .ant-dropdown-menu-item {\n      a {\n        min-width: 180px;\n        color: rgba(255, 253, 253, 0.79);\n        .item-icon {\n          display: inline-block;\n          width: 22px;\n        }\n      }\n      &:hover,\n      &.ant-dropdown-menu-item-active {\n        color: #fff;\n        background-color: @primary-color;\n      }\n    }\n    .ant-dropdown-menu-item-disabled {\n      a {\n        cursor: default;\n        color: rgba(236, 233, 233, 0.25);\n      }\n      &:hover {\n        background-color: transparent;\n        color: rgba(236, 233, 233, 0.25);\n      }\n    }\n    .ant-dropdown-menu-item-divider {\n      background-color: #767676;\n    }\n  }\n}\n</style>\n<style lang=\"less\">\n.session-window {\n  // .ant-drawer-content-wrapper {\n  //   box-shadow: none !important;\n  // }\n  .ant-drawer-mask {\n    background-color: transparent;\n  }\n  .ant-drawer-content {\n    background-color: #3c3f41;\n    .ant-drawer-header {\n      background-color: #3c3f41;\n      border-bottom: 1px solid #616161;\n      padding: 0;\n      .ant-drawer-close {\n        height: 34px;\n        width: 34px;\n        line-height: 34px;\n        color: rgba(255, 253, 253, 0.79);\n        font-size: 12px;\n        &:focus,\n        &:hover {\n          color: @primary-color;\n        }\n      }\n      .ant-drawer-title {\n        color: rgba(255, 253, 253, 0.79);\n        position: relative;\n        padding: 6px 16px;\n        font-size: 14px;\n        .pushpin {\n          position: absolute;\n          right: 32px;\n          top: 0px;\n          line-height: 34px;\n          font-size: 12px;\n          height: 34px;\n          cursor: pointer;\n          transition: all 0.3s;\n          &:focus,\n          &:hover {\n            color: @primary-color;\n          }\n        }\n      }\n    }\n    .ant-drawer-body {\n      padding: 0px;\n      color: rgba(255, 253, 253, 0.59);\n      .session {\n        padding: 6px 24px;\n        user-select: none;\n        cursor: pointer;\n        transition: all 0.3s;\n        &.active {\n          background-color: @primary-color;\n          color: #fff;\n        }\n        &:hover {\n          color: #fff;\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}