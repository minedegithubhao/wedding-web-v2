{"remainingRequest":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/views/gen/GenEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/views/gen/GenEdit.vue","mtime":1605568762456},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCYXNpY0luZm9Gb3JtIGZyb20gJy4vbW9kdWxlcy9CYXNpY0luZm9Gb3JtLnZ1ZScKaW1wb3J0IEdlbkluZm9Gb3JtIGZyb20gJy4vbW9kdWxlcy9HZW5JbmZvRm9ybS52dWUnCmltcG9ydCB7IGVkaXRHZW4sIGVkaXRTYXZlR2VuIH0gZnJvbSAnQC9hcGkvZ2VuJwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQmFzaWNJbmZvRm9ybSwKICAgIEdlbkluZm9Gb3JtCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8gdGFibGUKICAgICAgY29sdW1uczogWwogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5bqP5Y+3JywKICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ3NlcmlhbCcgfQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICflrZfmrrXliJflkI0nLAogICAgICAgICAgZGF0YUluZGV4OiAnY29sdW1uTmFtZScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5a2X5q615o+P6L+wJywKICAgICAgICAgIGRhdGFJbmRleDogJ2NvbHVtbkNvbW1lbnQnLAogICAgICAgICAga2V5OiAnY29sdW1uQ29tbWVudCcsCiAgICAgICAgICB3aWR0aDogJzEwJScsCiAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICdjb2x1bW5Db21tZW50JyB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+eJqeeQhuexu+WeiycsCiAgICAgICAgICBkYXRhSW5kZXg6ICdjb2x1bW5UeXBlJywKICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ2NvbHVtblR5cGUnIH0KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAnSmF2Yeexu+WeiycsCiAgICAgICAgICBkYXRhSW5kZXg6ICdqYXZhVHlwZScsCiAgICAgICAgICBrZXk6ICdqYXZhVHlwZScsCiAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICdqYXZhVHlwZScgfQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICdKYXZh5bGe5oCnJywKICAgICAgICAgIGRhdGFJbmRleDogJ2phdmFGaWVsZCcsCiAgICAgICAgICBrZXk6ICdqYXZhRmllbGQnLAogICAgICAgICAgd2lkdGg6ICcxMCUnLAogICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnamF2YUZpZWxkJyB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+aPkuWFpScsCiAgICAgICAgICBkYXRhSW5kZXg6ICdpc0luc2VydCcsCiAgICAgICAgICBrZXk6ICdpc0luc2VydCcsCiAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICdpc0luc2VydCcgfQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfnvJbovpEnLAogICAgICAgICAgZGF0YUluZGV4OiAnaXNFZGl0JywKICAgICAgICAgIGtleTogJ2lzRWRpdCcsCiAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICdpc0VkaXQnIH0KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5YiX6KGoJywKICAgICAgICAgIGRhdGFJbmRleDogJ2lzTGlzdCcsCiAgICAgICAgICBrZXk6ICdpc0xpc3QnLAogICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnaXNMaXN0JyB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+afpeivoicsCiAgICAgICAgICBkYXRhSW5kZXg6ICdpc1F1ZXJ5JywKICAgICAgICAgIGtleTogJ2lzUXVlcnknLAogICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnaXNRdWVyeScgfQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfmn6Xor6LmlrnlvI8nLAogICAgICAgICAgZGF0YUluZGV4OiAncXVlcnlUeXBlJywKICAgICAgICAgIGtleTogJ3F1ZXJ5VHlwZScsCiAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICdxdWVyeVR5cGUnIH0KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5b+F5aGrJywKICAgICAgICAgIGRhdGFJbmRleDogJ2lzUmVxdWlyZWQnLAogICAgICAgICAga2V5OiAnaXNSZXF1aXJlZCcsCiAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICdpc1JlcXVpcmVkJyB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+aYvuekuuexu+WeiycsCiAgICAgICAgICBkYXRhSW5kZXg6ICdodG1sVHlwZScsCiAgICAgICAgICBrZXk6ICdodG1sVHlwZScsCiAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICdodG1sVHlwZScgfQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICflrZflhbjnsbvlnosnLAogICAgICAgICAgZGF0YUluZGV4OiAnZGljdFR5cGUnLAogICAgICAgICAga2V5OiAnZGljdFR5cGUnLAogICAgICAgICAgd2lkdGg6ICcxMCUnLAogICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnZGljdFR5cGUnIH0KICAgICAgICB9CiAgICAgIF0sCiAgICAgIGRhdGE6IFtdLAogICAgICBpbmZvOiB7fSwKICAgICAgZXJyb3JzOiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHRhYmxlSWQ6ICcnLAogICAgICBjYXJkTG9hZGluZzogZmFsc2UKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICBjb25zdCB7IHRhYmxlSWQgfSA9IHRoaXMuJHJvdXRlLnF1ZXJ5CiAgICBpZiAodGFibGVJZCkgewogICAgICB0aGlzLmNhcmRMb2FkaW5nID0gdHJ1ZQogICAgICB0aGlzLnRhYmxlSWQgPSB0YWJsZUlkCiAgICAgIGVkaXRHZW4oeyB0YWJsZUlkOiB0YWJsZUlkIH0pCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuZGF0YSA9IHJlcy5yb3dzCiAgICAgICAgICB0aGlzLmluZm8gPSByZXMuZGF0YQogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgdGhpcy5jYXJkTG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSkKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAnJHJvdXRlLnF1ZXJ5LnRhYmxlSWQnKHRhYmxlSWQpIHsKICAgICAgaWYgKHRhYmxlSWQgJiYgYCR7dGhpcy50YWJsZUlkfWAgIT09IGAke3RhYmxlSWR9YCkgewogICAgICAgIHRoaXMuY2FyZExvYWRpbmcgPSB0cnVlCiAgICAgICAgdGhpcy50YWJsZUlkID0gdGFibGVJZAogICAgICAgIGVkaXRHZW4oeyB0YWJsZUlkOiB0YWJsZUlkIH0pCiAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLmRhdGEgPSByZXMucm93cwogICAgICAgICAgICB0aGlzLmluZm8gPSByZXMuZGF0YQogICAgICAgICAgfSkKICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5jYXJkTG9hZGluZyA9IGZhbHNlCiAgICAgICAgICB9KQogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDaGFuZ2UodmFsdWUsIGtleSwgY29sdW1uKSB7CiAgICAgIGNvbnN0IG5ld0RhdGEgPSBbLi4udGhpcy5kYXRhXQogICAgICBjb25zdCB0YXJnZXQgPSBuZXdEYXRhLmZpbHRlcihpdGVtID0+IGtleSA9PT0gaXRlbS5jb2x1bW5JZClbMF0KICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldFtjb2x1bW5dID0gdmFsdWUKICAgICAgICB0aGlzLmRhdGEgPSBuZXdEYXRhCiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRhKQogICAgfSwKICAgIGNhbGxiYWNrKGtleSkgewogICAgICAvLyBjb25zb2xlLmxvZyhrZXkpCiAgICB9LAoKICAgIC8vIOacgOe7iOWFqOmhtemdouaPkOS6pAogICAgdmFsaWRhdGUoKSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1kZWJ1Z2dlcgogICAgICAvLyBkZWJ1Z2dlcgogICAgICBjb25zdCBmb3JtcyA9IFtdCiAgICAgIGNvbnN0IGVycm9ycyA9IHt9CiAgICAgIGNvbnN0IHsKICAgICAgICAkcmVmczogeyBiYXNpY2luZm8sIGdlbmluZm8gfQogICAgICB9ID0gdGhpcwogICAgICBpZiAoYmFzaWNpbmZvKSB7CiAgICAgICAgY29uc3QgYmFzaWNpbmZvRm9ybSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgIGJhc2ljaW5mby5mb3JtLnZhbGlkYXRlRmllbGRzKChlcnIsIHZhbHVlcykgPT4gewogICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgcmVqZWN0KGVycikKICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICByZXNvbHZlKHZhbHVlcykKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgICBmb3Jtcy5wdXNoKGJhc2ljaW5mb0Zvcm0pCiAgICAgICAgT2JqZWN0LmFzc2lnbihlcnJvcnMsIGJhc2ljaW5mby5mb3JtLmdldEZpZWxkc0Vycm9yKCkpCiAgICAgIH0KICAgICAgaWYgKGdlbmluZm8pIHsKICAgICAgICBjb25zdCBnZW5pbmZvRm9ybSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgIGdlbmluZm8uZm9ybS52YWxpZGF0ZUZpZWxkcygoZXJyLCB2YWx1ZXMpID0+IHsKICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgIHJlamVjdChlcnIpCiAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZXMpCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgICAgZm9ybXMucHVzaChnZW5pbmZvRm9ybSkKICAgICAgICBPYmplY3QuYXNzaWduKGVycm9ycywgZ2VuaW5mby5mb3JtLmdldEZpZWxkc0Vycm9yKCkpCiAgICAgIH0KCiAgICAgIC8vIGNsZWFuIHRoaXMuZXJyb3JzCiAgICAgIHRoaXMuZXJyb3JzID0gW10KICAgICAgUHJvbWlzZS5hbGwoZm9ybXMpCiAgICAgICAgLnRoZW4odmFsdWVzID0+IHsKICAgICAgICAgIGNvbnN0IGdlblRhYmxlID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5pbmZvKQogICAgICAgICAgdmFsdWVzLmZvckVhY2goaSA9PiB7CiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oZ2VuVGFibGUsIGkpCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5pbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgZ2VuVGFibGUpCiAgICAgICAgICBnZW5UYWJsZS5jb2x1bW5zID0gdGhpcy5kYXRhCiAgICAgICAgICBnZW5UYWJsZS5wYXJhbXMgPSB7CiAgICAgICAgICAgIHRyZWVDb2RlOiBnZW5UYWJsZS50cmVlQ29kZSwKICAgICAgICAgICAgdHJlZU5hbWU6IGdlblRhYmxlLnRyZWVOYW1lLAogICAgICAgICAgICB0cmVlUGFyZW50Q29kZTogZ2VuVGFibGUudHJlZVBhcmVudENvZGUKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgICAgIGVkaXRTYXZlR2VuKGdlblRhYmxlKQogICAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv53lrZjmiJDlip8nKQogICAgICAgICAgICAgICAgdGhpcy5yb2xsYmFjaygpCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfns7vnu5/plJnor6/vvIzor7fnqI3lkI7lho3or5UnKQogICAgICAgICAgICB9KQogICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSkKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICBjb25zdCB0bXAgPSB7IC4uLmVycm9ycyB9CiAgICAgICAgICB0aGlzLmVycm9yTGlzdCh0bXApCiAgICAgICAgfSkKICAgIH0sCiAgICBlcnJvckxpc3QoZXJyb3JzKSB7CiAgICAgIGlmICghZXJyb3JzIHx8IGVycm9ycy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICB0aGlzLmVycm9ycyA9IE9iamVjdC5rZXlzKGVycm9ycykKICAgICAgICAuZmlsdGVyKGtleSA9PiBlcnJvcnNba2V5XSkKICAgICAgICAubWFwKGtleSA9PiAoewogICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICBtZXNzYWdlOiBlcnJvcnNba2V5XVswXQogICAgICAgIH0pKQogICAgICAvLyDov5nph4zlj6rovpPlh7rnrKzkuIDkuKrplJnor68s6ZyA6KaB6Ieq5bex5pS5CiAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IodGhpcy5lcnJvcnNbMF0ubWVzc2FnZSB8fCAn6YWN572u6ZSZ6K+vJykKICAgIH0sCiAgICByb2xsYmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy90b29sL2dlbicpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["GenEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GenEdit.vue","sourceRoot":"src/views/gen","sourcesContent":["<template>\n  <a-spin tip=\"Loading...\" :spinning=\"cardLoading\">\n    <a-card :bordered=\"false\">\n      <a-form @submit=\"handleSubmit\" :form=\"form\">\n        <a-tabs @change=\"callback\" defaultActiveKey=\"2\" type=\"card\">\n          <a-tab-pane tab=\"基本信息\" key=\"1\">\n            <basic-info-form ref=\"basicinfo\" :showSubmit=\"false\" :info=\"info\" />\n          </a-tab-pane>\n          <a-tab-pane tab=\"字段信息\" key=\"2\">\n            <a-table :pagination=\"false\" :columns=\"columns\" :dataSource=\"data\" rowKey=\"columnId\">\n              <span slot=\"serial\" slot-scope=\"text, record, index\">{{ index + 1 }}</span>\n              <template slot=\"javaType\" slot-scope=\"text, record\">\n                <a-select\n                  :value=\"text\"\n                  style=\"width: 120px\"\n                  @change=\"e => handleChange(e, record.columnId, 'javaType')\"\n                >\n                  <a-select-option value=\"Long\">Long</a-select-option>\n                  <a-select-option value=\"String\">String</a-select-option>\n                  <a-select-option value=\"Ingeter\">Ingeter</a-select-option>\n                  <a-select-option value=\"Double\">Double</a-select-option>\n                  <a-select-option value=\"BigDecimal\">BigDecimal</a-select-option>\n                  <a-select-option value=\"Date\">Date</a-select-option>\n                </a-select>\n              </template>\n              <template\n                v-for=\"(coli, i) in ['columnComment','javaField','dictType']\"\n                :slot=\"coli\"\n                slot-scope=\"text, record\"\n              >\n                <a-input\n                  :key=\"coli\"\n                  style=\"margin: -5px 0\"\n                  :value=\"text\"\n                  @change=\"e => handleChange(e.target.value, record.columnId, coli)\"\n                />\n              </template>\n              <template\n                v-for=\"(col, i) in ['isInsert','isEdit','isList','isQuery','isRequired']\"\n                :slot=\"col\"\n                slot-scope=\"text, record\"\n              >\n                <a-checkbox\n                  :key=\"col\"\n                  :defaultChecked=\"text==='1'\"\n                  @change=\"e => handleChange(e.target.checked?'1':'0', record.columnId, col)\"\n                ></a-checkbox>\n              </template>\n\n              <template slot=\"queryType\" slot-scope=\"text,record\">\n                <a-select\n                  :value=\"text\"\n                  style=\"width: 100px\"\n                  @change=\"e => handleChange(e, record.columnId, 'queryType')\"\n                >\n                  <a-select-option value=\"EQ\">=</a-select-option>\n                  <a-select-option value=\"NE\">!=</a-select-option>\n                  <a-select-option value=\"GT\">&gt;</a-select-option>\n                  <a-select-option value=\"GTE\">&gt;=</a-select-option>\n                  <a-select-option value=\"LT\">&gt;</a-select-option>\n                  <a-select-option value=\"LTE\">&gt;=</a-select-option>\n                  <a-select-option value=\"LIKE\">LIKE</a-select-option>\n                  <a-select-option value=\"BETWEEN\">BETWEEN</a-select-option>\n                </a-select>\n              </template>\n              <template slot=\"htmlType\" slot-scope=\"text,record\">\n                <a-select\n                  :value=\"text\"\n                  style=\"width: 100px\"\n                  @change=\"e => handleChange(e, record.columnId, 'htmlType')\"\n                >\n                  <a-select-option value=\"input\">文本框</a-select-option>\n                  <a-select-option value=\"textarea\">文本域</a-select-option>\n                  <a-select-option value=\"select\">下拉框</a-select-option>\n                  <a-select-option value=\"radio\">单选框</a-select-option>\n                  <a-select-option value=\"checkbox\">复选框</a-select-option>\n                  <a-select-option value=\"datetime\">日期控件</a-select-option>\n                </a-select>\n              </template>\n            </a-table>\n            <br />\n          </a-tab-pane>\n          <a-tab-pane tab=\"生成信息\" key=\"3\">\n            <gen-info-form ref=\"geninfo\" :showSubmit=\"false\" :info=\"info\" />\n          </a-tab-pane>\n        </a-tabs>\n        <a-form-item :wrapperCol=\"{ span: 24 }\" style=\"text-align: center\">\n          <a-button icon=\"check\" type=\"primary\" @click=\"validate\" :loading=\"loading\">提交</a-button>\n          <a-button icon=\"rollback\" style=\"margin-left: 8px\" @click=\"rollback\">关闭</a-button>\n        </a-form-item>\n      </a-form>\n    </a-card>\n  </a-spin>\n</template>\n<script>\nimport BasicInfoForm from './modules/BasicInfoForm.vue'\nimport GenInfoForm from './modules/GenInfoForm.vue'\nimport { editGen, editSaveGen } from '@/api/gen'\nexport default {\n  components: {\n    BasicInfoForm,\n    GenInfoForm\n  },\n  data() {\n    return {\n      // table\n      columns: [\n        {\n          title: '序号',\n          scopedSlots: { customRender: 'serial' }\n        },\n        {\n          title: '字段列名',\n          dataIndex: 'columnName'\n        },\n        {\n          title: '字段描述',\n          dataIndex: 'columnComment',\n          key: 'columnComment',\n          width: '10%',\n          scopedSlots: { customRender: 'columnComment' }\n        },\n        {\n          title: '物理类型',\n          dataIndex: 'columnType',\n          scopedSlots: { customRender: 'columnType' }\n        },\n        {\n          title: 'Java类型',\n          dataIndex: 'javaType',\n          key: 'javaType',\n          scopedSlots: { customRender: 'javaType' }\n        },\n        {\n          title: 'Java属性',\n          dataIndex: 'javaField',\n          key: 'javaField',\n          width: '10%',\n          scopedSlots: { customRender: 'javaField' }\n        },\n        {\n          title: '插入',\n          dataIndex: 'isInsert',\n          key: 'isInsert',\n          scopedSlots: { customRender: 'isInsert' }\n        },\n        {\n          title: '编辑',\n          dataIndex: 'isEdit',\n          key: 'isEdit',\n          scopedSlots: { customRender: 'isEdit' }\n        },\n        {\n          title: '列表',\n          dataIndex: 'isList',\n          key: 'isList',\n          scopedSlots: { customRender: 'isList' }\n        },\n        {\n          title: '查询',\n          dataIndex: 'isQuery',\n          key: 'isQuery',\n          scopedSlots: { customRender: 'isQuery' }\n        },\n        {\n          title: '查询方式',\n          dataIndex: 'queryType',\n          key: 'queryType',\n          scopedSlots: { customRender: 'queryType' }\n        },\n        {\n          title: '必填',\n          dataIndex: 'isRequired',\n          key: 'isRequired',\n          scopedSlots: { customRender: 'isRequired' }\n        },\n        {\n          title: '显示类型',\n          dataIndex: 'htmlType',\n          key: 'htmlType',\n          scopedSlots: { customRender: 'htmlType' }\n        },\n        {\n          title: '字典类型',\n          dataIndex: 'dictType',\n          key: 'dictType',\n          width: '10%',\n          scopedSlots: { customRender: 'dictType' }\n        }\n      ],\n      data: [],\n      info: {},\n      errors: [],\n      loading: false,\n      tableId: '',\n      cardLoading: false\n    }\n  },\n  created() {\n    const { tableId } = this.$route.query\n    if (tableId) {\n      this.cardLoading = true\n      this.tableId = tableId\n      editGen({ tableId: tableId })\n        .then(res => {\n          this.data = res.rows\n          this.info = res.data\n        })\n        .finally(() => {\n          this.cardLoading = false\n        })\n    }\n  },\n  watch: {\n    '$route.query.tableId'(tableId) {\n      if (tableId && `${this.tableId}` !== `${tableId}`) {\n        this.cardLoading = true\n        this.tableId = tableId\n        editGen({ tableId: tableId })\n          .then(res => {\n            this.data = res.rows\n            this.info = res.data\n          })\n          .finally(() => {\n            this.cardLoading = false\n          })\n      }\n    }\n  },\n  methods: {\n    handleChange(value, key, column) {\n      const newData = [...this.data]\n      const target = newData.filter(item => key === item.columnId)[0]\n      if (target) {\n        target[column] = value\n        this.data = newData\n      }\n      // console.log(this.data)\n    },\n    callback(key) {\n      // console.log(key)\n    },\n\n    // 最终全页面提交\n    validate() {\n      // eslint-disable-next-line no-debugger\n      // debugger\n      const forms = []\n      const errors = {}\n      const {\n        $refs: { basicinfo, geninfo }\n      } = this\n      if (basicinfo) {\n        const basicinfoForm = new Promise((resolve, reject) => {\n          basicinfo.form.validateFields((err, values) => {\n            if (err) {\n              reject(err)\n              return\n            }\n            resolve(values)\n          })\n        })\n        forms.push(basicinfoForm)\n        Object.assign(errors, basicinfo.form.getFieldsError())\n      }\n      if (geninfo) {\n        const geninfoForm = new Promise((resolve, reject) => {\n          geninfo.form.validateFields((err, values) => {\n            if (err) {\n              reject(err)\n              return\n            }\n            resolve(values)\n          })\n        })\n        forms.push(geninfoForm)\n        Object.assign(errors, geninfo.form.getFieldsError())\n      }\n\n      // clean this.errors\n      this.errors = []\n      Promise.all(forms)\n        .then(values => {\n          const genTable = Object.assign({}, this.info)\n          values.forEach(i => {\n            Object.assign(genTable, i)\n          })\n          this.info = Object.assign({}, genTable)\n          genTable.columns = this.data\n          genTable.params = {\n            treeCode: genTable.treeCode,\n            treeName: genTable.treeName,\n            treeParentCode: genTable.treeParentCode\n          }\n          this.loading = true\n          editSaveGen(genTable)\n            .then(res => {\n              if (res.code === 0) {\n                this.$message.success('保存成功')\n                this.rollback()\n              } else {\n                this.$message.success(res.msg)\n              }\n            })\n            .catch(() => {\n              this.$message.error('系统错误，请稍后再试')\n            })\n            .finally(() => {\n              this.loading = false\n            })\n        })\n        .catch(() => {\n          const tmp = { ...errors }\n          this.errorList(tmp)\n        })\n    },\n    errorList(errors) {\n      if (!errors || errors.length === 0) {\n        return\n      }\n      this.errors = Object.keys(errors)\n        .filter(key => errors[key])\n        .map(key => ({\n          key: key,\n          message: errors[key][0]\n        }))\n      // 这里只输出第一个错误,需要自己改\n      this.$message.error(this.errors[0].message || '配置错误')\n    },\n    rollback() {\n      this.$router.push('/tool/gen')\n    }\n  }\n}\n</script>\n"]}]}