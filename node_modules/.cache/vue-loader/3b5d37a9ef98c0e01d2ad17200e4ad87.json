{"remainingRequest":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/Editor/QuillEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/Editor/QuillEditor.vue","mtime":1605568762399},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgovLyDlt6XlhbfmoI/phY3nva4KaW1wb3J0ICdxdWlsbC9kaXN0L3F1aWxsLmNvcmUuY3NzJwppbXBvcnQgJ3F1aWxsL2Rpc3QvcXVpbGwuc25vdy5jc3MnCmltcG9ydCAncXVpbGwvZGlzdC9xdWlsbC5idWJibGUuY3NzJwoKaW1wb3J0IHsgcXVpbGxFZGl0b3IgfSBmcm9tICd2dWUtcXVpbGwtZWRpdG9yJwoKY29uc3QgdG9vbGJhck9wdGlvbnMgPSBbCiAgWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnLCAnc3RyaWtlJ10sIC8vIOWKoOeylyDmlpzkvZMg5LiL5YiS57q/IOWIoOmZpOe6vwogIFsnYmxvY2txdW90ZScsICdjb2RlLWJsb2NrJ10sIC8vIOW8leeUqCAg5Luj56CB5Z2XCiAgW3sgbGlzdDogJ29yZGVyZWQnIH0sIHsgbGlzdDogJ2J1bGxldCcgfV0sIC8vIOacieW6j+OAgeaXoOW6j+WIl+ihqAogIFt7ICdzY3JpcHQnOiAnc3ViJyB9LCB7ICdzY3JpcHQnOiAnc3VwZXInIH1dLAogIFt7IGluZGVudDogJy0xJyB9LCB7IGluZGVudDogJysxJyB9XSwgLy8g57yp6L+bCiAgW3sgJ2RpcmVjdGlvbic6ICdydGwnIH1dLAogIFt7IHNpemU6IFsnc21hbGwnLCBmYWxzZSwgJ2xhcmdlJywgJ2h1Z2UnXSB9XSwgLy8g5a2X5L2T5aSn5bCPCiAgW3sgaGVhZGVyOiBbMSwgMiwgMywgNCwgNSwgNiwgZmFsc2VdIH1dLCAvLyDmoIfpopgKICBbeyBjb2xvcjogW10gfSwgeyBiYWNrZ3JvdW5kOiBbXSB9XSwgLy8g5a2X5L2T6aKc6Imy44CB5a2X5L2T6IOM5pmv6aKc6ImyCiAgW3sgJ2ZvbnQnOiBbXSB9XSwKICBbeyBhbGlnbjogW10gfV0sIC8vIOWvuem9kOaWueW8jwogIFsnbGluaycsICdpbWFnZScsICd2aWRlbyddLCAvLyDpk77mjqXjgIHlm77niYfjgIHop4bpopEKICBbJ2NsZWFuJ10gLy8g5riF6Zmk5paH5pys5qC85byPCl0KZnVuY3Rpb24gZ2V0QmFzZTY0IChpbWcsIGNhbGxiYWNrKSB7CiAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKQogIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gY2FsbGJhY2socmVhZGVyLnJlc3VsdCkpCiAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1nKQp9CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUXVpbGxFZGl0b3InLAogIGNvbXBvbmVudHM6IHsKICAgIHF1aWxsRWRpdG9yCiAgfSwKICBwcm9wczogewogICAgcHJlZml4Q2xzOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2FudC1lZGl0b3ItcXVpbGwnCiAgICB9LAogICAgLy8g6KGo5Y2V5qCh6aqM55So5a2X5q61CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfQogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBjb250ZW50OiB0aGlzLnZhbHVlLAogICAgICBlZGl0b3JPcHRpb246IHsKICAgICAgICB0aGVtZTogJ3Nub3cnLCAvLyBvciAnYnViYmxlJwogICAgICAgIHBsYWNlaG9sZGVyOiAn6K+36L6T5YWl5YaF5a65JywKICAgICAgICBtb2R1bGVzOiB7CiAgICAgICAgICB0b29sYmFyOiB7CiAgICAgICAgICAgIGNvbnRhaW5lcjogdG9vbGJhck9wdGlvbnMsCiAgICAgICAgICAgIGhhbmRsZXJzOiB7CiAgICAgICAgICAgICAgaW1hZ2U6IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIC8vIOinpuWPkWlucHV05qGG6YCJ5oup5Zu+54mH5paH5Lu2CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWlsbC1pbWcgaW5wdXQnKS5jbGljaygpCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLnF1aWxsLmZvcm1hdCgnaW1hZ2UnLCBmYWxzZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICBvbkVkaXRvckJsdXIgKHF1aWxsKSB7CiAgICAgIGNvbnNvbGUubG9nKCdlZGl0b3IgYmx1ciEnLCBxdWlsbCkKICAgIH0sCiAgICBvbkVkaXRvckZvY3VzIChxdWlsbCkgewogICAgICBjb25zb2xlLmxvZygnZWRpdG9yIGZvY3VzIScsIHF1aWxsKQogICAgfSwKICAgIG9uRWRpdG9yUmVhZHkgKHF1aWxsKSB7CiAgICAgIGNvbnNvbGUubG9nKCdlZGl0b3IgcmVhZHkhJywgcXVpbGwpCiAgICB9LAogICAgb25FZGl0b3JDaGFuZ2UgKHsgcXVpbGwsIGh0bWwsIHRleHQgfSkgewogICAgICBjb25zb2xlLmxvZygnZWRpdG9yIGNoYW5nZSEnLCBxdWlsbCwgaHRtbCwgdGV4dCkKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgaHRtbCkKICAgIH0sCiAgICAvLyDlr4zmlofmnKzlm77niYfkuIrkvKDliY0KICAgIHF1aWxsSW1nQmVmb3JlIChmaWxlKSB7CiAgICAgIGNvbnN0IGlzSnBnT3JQbmcgPSBmaWxlLnR5cGUgPT09ICdpbWFnZS9qcGVnJyB8fCBmaWxlLnR5cGUgPT09ICdpbWFnZS9wbmcnCiAgICAgIGlmICghaXNKcGdPclBuZykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+aPkuWFpeWbvueJh+exu+Wei+aWh+S7tihqcGcvanBlZy9wbmcpJykKICAgICAgfQogICAgICBjb25zdCBpc0x0Mk0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDIKICAgICAgaWYgKCFpc0x0Mk0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCdJbWFnZSBtdXN0IHNtYWxsZXIgdGhhbiAyTUIhJykKICAgICAgfQogICAgICByZXR1cm4gaXNKcGdPclBuZyAmJiBpc0x0Mk0KICAgIH0sCgogICAgcXVpbGxJbWdTdWNjZXNzIChpbmZvKSB7CiAgICAgIGlmIChpbmZvLmZpbGUuc3RhdHVzID09PSAnZG9uZScpIHsKICAgICAgICAvLyDojrflj5blr4zmlofmnKznu4Tku7blrp7kvosKICAgICAgICBjb25zdCBxdWlsbCA9IHRoaXMuJHJlZnMubXlRdWlsbEVkaXRvci5xdWlsbAogICAgICAgIC8vIEdldCB0aGlzIHVybCBmcm9tIHJlc3BvbnNlIGluIHJlYWwgd29ybGQuCiAgICAgICAgZ2V0QmFzZTY0KGluZm8uZmlsZS5vcmlnaW5GaWxlT2JqLCBpbWFnZVVybCA9PiB7CiAgICAgICAgICAvLyDojrflj5blhYnmoIfmiYDlnKjkvY3nva4KICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IHF1aWxsLmdldFNlbGVjdGlvbigpLmluZGV4CiAgICAgICAgICAvLyDmj5LlhaXlm77niYcgIHJlcy51cmzkuLrmnI3liqHlmajov5Tlm57nmoTlm77niYflnLDlnYAKICAgICAgICAgIHF1aWxsLmluc2VydEVtYmVkKGxlbmd0aCwgJ2ltYWdlJywgaW1hZ2VVcmwpCiAgICAgICAgICAvLyDosIPmlbTlhYnmoIfliLDmnIDlkI4KICAgICAgICAgIHF1aWxsLnNldFNlbGVjdGlvbihsZW5ndGggKyAxKQogICAgICAgIH0pCiAgICAgICAgLy8g5LiL6Z2i5piv5pyN5Yqh5LiK5Lyg55yf5a6edXJs5pON5L2cCiAgICAgICAgLy8gLy8g5aaC5p6c5LiK5Lyg5oiQ5YqfCiAgICAgICAgLy8gaWYgKGluZm8ucmVzcG9uc2UuY29kZSA9PT0gMCkgewogICAgICAgIC8vICAgLy8g6I635Y+W5YWJ5qCH5omA5Zyo5L2N572uCiAgICAgICAgLy8gICBjb25zdCBsZW5ndGggPSBxdWlsbC5nZXRTZWxlY3Rpb24oKS5pbmRleAogICAgICAgIC8vICAgLy8g5o+S5YWl5Zu+54mHICByZXMudXJs5Li65pyN5Yqh5Zmo6L+U5Zue55qE5Zu+54mH5Zyw5Z2ACiAgICAgICAgLy8gICBxdWlsbC5pbnNlcnRFbWJlZChsZW5ndGgsICdpbWFnZScsIGluZm8ucmVzcG9uc2UudXJsKQogICAgICAgIC8vICAgLy8g6LCD5pW05YWJ5qCH5Yiw5pyA5ZCOCiAgICAgICAgLy8gICBxdWlsbC5zZXRTZWxlY3Rpb24obGVuZ3RoICsgMSkKICAgICAgICAvLyB9CiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZTogZnVuY3Rpb24gKHZhbCkgewogICAgICB0aGlzLmNvbnRlbnQgPSB2YWwKICAgIH0KICB9Cn0K"},{"version":3,"sources":["QuillEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"QuillEditor.vue","sourceRoot":"src/components/Editor","sourcesContent":["<template>\n  <div :class=\"prefixCls\">\n    <a-upload\n      class=\"avatar-uploader quill-img\"\n      name=\"file\"\n      :multiple=\"true\"\n      action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\n      :headers=\"headers\"\n      @change=\"quillImgSuccess\"\n      :beforeUpload=\"quillImgBefore\"\n    >\n    </a-upload>\n    <quill-editor\n      class=\"ql-editor-class\"\n      v-model=\"content\"\n      ref=\"myQuillEditor\"\n      :options=\"editorOption\"\n      @blur=\"onEditorBlur($event)\"\n      @focus=\"onEditorFocus($event)\"\n      @ready=\"onEditorReady($event)\"\n      @change=\"onEditorChange($event)\">\n    </quill-editor>\n\n  </div>\n</template>\n\n<script>\n\n// 工具栏配置\nimport 'quill/dist/quill.core.css'\nimport 'quill/dist/quill.snow.css'\nimport 'quill/dist/quill.bubble.css'\n\nimport { quillEditor } from 'vue-quill-editor'\n\nconst toolbarOptions = [\n  ['bold', 'italic', 'underline', 'strike'], // 加粗 斜体 下划线 删除线\n  ['blockquote', 'code-block'], // 引用  代码块\n  [{ list: 'ordered' }, { list: 'bullet' }], // 有序、无序列表\n  [{ 'script': 'sub' }, { 'script': 'super' }],\n  [{ indent: '-1' }, { indent: '+1' }], // 缩进\n  [{ 'direction': 'rtl' }],\n  [{ size: ['small', false, 'large', 'huge'] }], // 字体大小\n  [{ header: [1, 2, 3, 4, 5, 6, false] }], // 标题\n  [{ color: [] }, { background: [] }], // 字体颜色、字体背景颜色\n  [{ 'font': [] }],\n  [{ align: [] }], // 对齐方式\n  ['link', 'image', 'video'], // 链接、图片、视频\n  ['clean'] // 清除文本格式\n]\nfunction getBase64 (img, callback) {\n  const reader = new FileReader()\n  reader.addEventListener('load', () => callback(reader.result))\n  reader.readAsDataURL(img)\n}\nexport default {\n  name: 'QuillEditor',\n  components: {\n    quillEditor\n  },\n  props: {\n    prefixCls: {\n      type: String,\n      default: 'ant-editor-quill'\n    },\n    // 表单校验用字段\n    // eslint-disable-next-line\n    value: {\n      type: String\n    }\n  },\n  data () {\n    return {\n      content: this.value,\n      editorOption: {\n        theme: 'snow', // or 'bubble'\n        placeholder: '请输入内容',\n        modules: {\n          toolbar: {\n            container: toolbarOptions,\n            handlers: {\n              image: function (value) {\n                if (value) {\n                  // 触发input框选择图片文件\n                  document.querySelector('.quill-img input').click()\n                } else {\n                  this.quill.format('image', false)\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n\n  methods: {\n    onEditorBlur (quill) {\n      console.log('editor blur!', quill)\n    },\n    onEditorFocus (quill) {\n      console.log('editor focus!', quill)\n    },\n    onEditorReady (quill) {\n      console.log('editor ready!', quill)\n    },\n    onEditorChange ({ quill, html, text }) {\n      console.log('editor change!', quill, html, text)\n      this.$emit('change', html)\n    },\n    // 富文本图片上传前\n    quillImgBefore (file) {\n      const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\n      if (!isJpgOrPng) {\n        this.$message.error('请插入图片类型文件(jpg/jpeg/png)')\n      }\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isLt2M) {\n        this.$message.error('Image must smaller than 2MB!')\n      }\n      return isJpgOrPng && isLt2M\n    },\n\n    quillImgSuccess (info) {\n      if (info.file.status === 'done') {\n        // 获取富文本组件实例\n        const quill = this.$refs.myQuillEditor.quill\n        // Get this url from response in real world.\n        getBase64(info.file.originFileObj, imageUrl => {\n          // 获取光标所在位置\n          const length = quill.getSelection().index\n          // 插入图片  res.url为服务器返回的图片地址\n          quill.insertEmbed(length, 'image', imageUrl)\n          // 调整光标到最后\n          quill.setSelection(length + 1)\n        })\n        // 下面是服务上传真实url操作\n        // // 如果上传成功\n        // if (info.response.code === 0) {\n        //   // 获取光标所在位置\n        //   const length = quill.getSelection().index\n        //   // 插入图片  res.url为服务器返回的图片地址\n        //   quill.insertEmbed(length, 'image', info.response.url)\n        //   // 调整光标到最后\n        //   quill.setSelection(length + 1)\n        // }\n      }\n    }\n  },\n  watch: {\n    value: function (val) {\n      this.content = val\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import url('../index.less');\n/* 覆盖 quill 默认边框圆角为 ant 默认圆角，用于统一 ant 组件风格 */\n.ant-editor-quill {\n  /deep/ .ql-toolbar.ql-snow {\n    border-radius: @border-radius-base @border-radius-base 0 0;\n  }\n  /deep/ .ql-container.ql-snow {\n    border-radius: 0 0 @border-radius-base @border-radius-base;\n  }\n}\n//解决图标样式错乱 https://blog.csdn.net/qq_27295403/article/details/96482198\n.ql-editor-class {\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    line-height: 1.42;\n    height: 100%;\n    outline: none;\n    padding: 0 !important;\n    tab-size: 4;\n    -moz-tab-size: 4;\n    text-align: left;\n    word-wrap: break-word;\n}\n</style>\n<style>\n.editor {\n  line-height: normal !important;\n  height: 192px;\n}\n.quill-img {\n  display: none;\n}\n.ql-snow .ql-tooltip[data-mode=\"link\"]::before {\n  content: \"请输入链接地址:\";\n}\n.ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n  border-right: 0px;\n  content: \"保存\";\n  padding-right: 0px;\n}\n\n.ql-snow .ql-tooltip[data-mode=\"video\"]::before {\n  content: \"请输入视频地址:\";\n}\n\n.ql-snow .ql-picker.ql-size .ql-picker-label::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item::before {\n  content: \"14px\";\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=\"small\"]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=\"small\"]::before {\n  content: \"10px\";\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=\"large\"]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=\"large\"]::before {\n  content: \"18px\";\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=\"huge\"]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=\"huge\"]::before {\n  content: \"32px\";\n}\n\n.ql-snow .ql-picker.ql-header .ql-picker-label::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item::before {\n  content: \"文本\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"1\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before {\n  content: \"标题1\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"2\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before {\n  content: \"标题2\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"3\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before {\n  content: \"标题3\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"4\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before {\n  content: \"标题4\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"5\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"5\"]::before {\n  content: \"标题5\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"6\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"6\"]::before {\n  content: \"标题6\";\n}\n\n.ql-snow .ql-picker.ql-font .ql-picker-label::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item::before {\n  content: \"标准字体\";\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=\"serif\"]::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=\"serif\"]::before {\n  content: \"衬线字体\";\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=\"monospace\"]::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=\"monospace\"]::before {\n  content: \"等宽字体\";\n}\n</style>\n"]}]}