{"remainingRequest":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/pts/WebShell/index.vue?vue&type=style&index=1&lang=less&","dependencies":[{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/pts/WebShell/index.vue","mtime":1605568762426},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5zZXNzaW9uLXdpbmRvdyB7CiAgLy8gLmFudC1kcmF3ZXItY29udGVudC13cmFwcGVyIHsKICAvLyAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKICAvLyB9CiAgLmFudC1kcmF3ZXItbWFzayB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICB9CiAgLmFudC1kcmF3ZXItY29udGVudCB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjM2MzZjQxOwogICAgLmFudC1kcmF3ZXItaGVhZGVyIHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzNjM2Y0MTsKICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM2MTYxNjE7CiAgICAgIHBhZGRpbmc6IDA7CiAgICAgIC5hbnQtZHJhd2VyLWNsb3NlIHsKICAgICAgICBoZWlnaHQ6IDM0cHg7CiAgICAgICAgd2lkdGg6IDM0cHg7CiAgICAgICAgbGluZS1oZWlnaHQ6IDM0cHg7CiAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTMsIDI1MywgMC43OSk7CiAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICY6Zm9jdXMsCiAgICAgICAgJjpob3ZlciB7CiAgICAgICAgICBjb2xvcjogQHByaW1hcnktY29sb3I7CiAgICAgICAgfQogICAgICB9CiAgICAgIC5hbnQtZHJhd2VyLXRpdGxlIHsKICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1MywgMjUzLCAwLjc5KTsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgcGFkZGluZzogNnB4IDE2cHg7CiAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgIC5wdXNocGluIHsKICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgIHJpZ2h0OiAzMnB4OwogICAgICAgICAgdG9wOiAwcHg7CiAgICAgICAgICBsaW5lLWhlaWdodDogMzRweDsKICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgIGhlaWdodDogMzRweDsKICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzOwogICAgICAgICAgJjpmb2N1cywKICAgICAgICAgICY6aG92ZXIgewogICAgICAgICAgICBjb2xvcjogQHByaW1hcnktY29sb3I7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAuYW50LWRyYXdlci1ib2R5IHsKICAgICAgcGFkZGluZzogMHB4OwogICAgICBjb2xvcjogcmdiYSgyNTUsIDI1MywgMjUzLCAwLjU5KTsKICAgICAgLnNlc3Npb24gewogICAgICAgIHBhZGRpbmc6IDZweCAyNHB4OwogICAgICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsKICAgICAgICAmLmFjdGl2ZSB7CiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBAcHJpbWFyeS1jb2xvcjsKICAgICAgICAgIGNvbG9yOiAjZmZmOwogICAgICAgIH0KICAgICAgICAmOmhvdmVyIHsKICAgICAgICAgIGNvbG9yOiAjZmZmOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/pts/WebShell","sourcesContent":["<template>\n  <div class=\"web-shell\">\n    <window-shell :show-title=\"false\" :show-drawer=\"sessionWindow\" :drawer-width=\"drawerWidth\" :multi-tab=\"true\">\n      <template v-slot:toolBar>\n        <div class=\"toolBar-container\">\n          <span @click=\"showSessionWindow\" class=\"toolBar-btn\"><a-icon :type=\"sessionWindow ? 'menu-fold' : 'menu-unfold'\" title=\"打开会话管理器\"/></span>\n          <a-dropdown overlay-class-name=\"toolBar-dropdown\" :trigger=\"['hover']\">\n            <span class=\"toolBar-btn ant-dropdown-link\">\n              <a-icon type=\"plus\" class=\"toolBar-icon\" />会话\n            </span>\n            <a-menu slot=\"overlay\">\n              <a-menu-item key=\"0\">\n                <a @click=\"addSession\"><span class=\"item-icon\"><a-icon type=\"plus\" class=\"toolBar-icon\" /></span>新建会话</a>\n              </a-menu-item>\n              <a-menu-item key=\"1\" :disabled=\"!selectKey\">\n                <a @click=\"() => editSession(selectRow)\"><span class=\"item-icon\"><a-icon type=\"folder-open\" class=\"toolBar-icon\" /></span>修改会话</a>\n              </a-menu-item>\n              <a-menu-divider />\n              <a-menu-item key=\"2\" :disabled=\"!selectKey\">\n                <a @click=\"() => deleteSession(selectRow)\"><span class=\"item-icon\"><a-icon type=\"delete\" class=\"toolBar-icon\" /></span>删除会话</a>\n              </a-menu-item>\n              <a-menu-divider />\n              <a-menu-item key=\"3\" :disabled=\"!selectKey\">\n                <a @click=\"() => openSessionConnect(selectRow)\"><span class=\"item-icon\"><a-icon type=\"folder-open\" class=\"toolBar-icon\" /></span>打开会话连接</a>\n              </a-menu-item>\n              <a-menu-item key=\"4\" :disabled=\"!selectKey\">\n                <a @click=\"() => closeSessionConnect(selectRow)\"><span class=\"item-icon\"><a-icon type=\"close\" class=\"toolBar-icon\" /></span>断开会话连接</a>\n              </a-menu-item>\n            </a-menu>\n          </a-dropdown>\n          <span @click=\"handleScreenshot\" class=\"toolBar-btn\">截图</span>\n        </div>\n      </template>\n      <template v-slot:sessionWindow>\n        <a-drawer\n          placement=\"left\"\n          :closable=\"true\"\n          :visible=\"sessionWindow\"\n          :get-container=\"false\"\n          :mask=\"sessionMask\"\n          :wrap-style=\"{ position: 'absolute' }\"\n          @close=\"closeSessionWindow\"\n          wrap-class-name=\"session-window\"\n          :width=\"185\"\n        >\n          <template slot=\"title\">\n            会话管理器\n            <a-icon type=\"pushpin\" class=\"pushpin\" :rotate=\"sessionMask ? 45 : -45\" @click=\"handleMask\"/>\n          </template>\n          <div v-for=\"(session, index) in sessionList\" :key=\"index\">\n            <a-dropdown overlay-class-name=\"toolBar-dropdown\" :trigger=\"['contextmenu']\">\n              <div class=\"session\" :class=\"{ 'active': session.id === selectKey }\" @dblclick=\"() => openSessionConnect(session)\" @click=\"() => selectSession(session)\">\n                <div title=\"双击连接会话\">{{ session.name }}</div>\n              </div>\n              <a-menu slot=\"overlay\">\n                <a-menu-item key=\"0\">\n                  <a @click=\"() => openSessionConnect(session)\"><span class=\"item-icon\"><a-icon type=\"plus\" class=\"toolBar-icon\" /></span>打开会话连接</a>\n                </a-menu-item>\n                <a-menu-item key=\"1\">\n                  <a @click=\"() => closeSessionConnect(session)\"><span class=\"item-icon\"><a-icon type=\"close\" class=\"toolBar-icon\" /></span>断开会话连接</a>\n                </a-menu-item>\n                <a-menu-divider />\n                <a-menu-item key=\"2\">\n                  <a @click=\"() => editSession(session)\"><span class=\"item-icon\"><a-icon type=\"folder-open\" class=\"toolBar-icon\" /></span>修改会话</a>\n                </a-menu-item>\n                <a-menu-item key=\"3\">\n                  <a @click=\"() => deleteSession(session)\"><span class=\"item-icon\"><a-icon type=\"delete\" class=\"toolBar-icon\" /></span>删除会话</a>\n                </a-menu-item>\n              </a-menu>\n            </a-dropdown>\n          </div>\n        </a-drawer>\n      </template>\n      <!-- <template v-slot:shellMultiTab> -->\n        <multi-tab ref=\"sessionTab\" :show-drawer=\"sessionWindow\" :drawer-width=\"drawerWidth\"></multi-tab>\n      <!-- </template> -->\n    </window-shell>\n    <add-session ref=\"sessionModel\" @ok=\"handleAndOk\"></add-session>\n    <screenshot ref=\"screenshot\" class=\"screenshot\" />\n  </div>\n</template>\n\n<script>\nimport WindowShell from './window.vue'\nimport Logo from '@/components/tools/Logo'\nimport Screenshot from '@/components/pts/Screenshot/index.vue'\nimport AddSession from './addSession.vue'\nimport MultiTab from './MultiTab'\n\nexport default {\n  name: 'WebShell',\n  components: {\n    WindowShell,\n    Logo,\n    Screenshot,\n    AddSession,\n    MultiTab\n  },\n  data() {\n    return {\n      name: 'WebShell',\n      sessionWindow: true,\n      sessionMask: false,\n      drawerWidth: '185px',\n      selectKey: '',\n      selectRow: {},\n      sessionList: [\n        {\n          id: '1',\n          name: '192.168.1.231',\n          ip: '192.168.1.231',\n          port: '22',\n          username: 'root',\n          password: 'xa-11'\n        },\n        {\n          id: '2',\n          name: '192.168.1.233',\n          ip: '192.168.1.233',\n          port: '22',\n          username: 'root',\n          password: 'xa-11'\n        }\n      ]\n    }\n  },\n  computed: {},\n  watch: {},\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  methods: {\n    openSessionConnect(row) {\n      this.$refs.sessionTab.open(row)\n    },\n    closeSessionConnect(row) {\n      this.$refs.sessionTab.close(row.id)\n    },\n    selectSession(row) {\n      this.selectKey = row.id\n      this.selectRow = row\n    },\n    addSession() {\n      this.$refs.sessionModel.add()\n    },\n    editSession(row) {\n      this.$refs.sessionModel.edit(row)\n    },\n    deleteSession(row) {\n      const self = this\n      this.$confirm({\n        title: '提示',\n        content: <span>确定要删除<span style=\"color: red\">{row.name}</span>会话吗？</span>,\n        okText: '删除',\n        cancelText: '取消',\n        onOk() {\n          self.sessionList = self.sessionList.filter(item => item.id !== row.id)\n          self.closeSessionConnect(row)\n          self.selectRow = {}\n          self.selectKey = ''\n        }\n      })\n    },\n    handleAndOk(row) {\n      const sessionList = this.sessionList.filter(item => item.id !== row.id)\n      if (sessionList.length > 0) {\n        this.sessionList = this.sessionList.map(item => {\n          if (item.id === row.id) {\n            return row\n          } else {\n            return item\n          }\n        })\n        this.selectRow = row\n        this.closeSessionConnect(row)\n      } else {\n        this.sessionList.push(row)\n      }\n    },\n    handleScreenshot() {\n      this.$refs.screenshot.capture(document.getElementById('terminal'))\n    },\n    showSessionWindow() {\n      this.sessionWindow = !this.sessionWindow\n    },\n    closeSessionWindow() {\n      this.sessionWindow = false\n    },\n    handleMask() {\n      this.sessionMask = !this.sessionMask\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@header-height: 32px;\n.web-shell {\n  position: relative;\n  .toolBar-container {\n    height: 100%;\n    display: inline-block;\n    user-select: none;\n    .toolBar-btn {\n      height: 100%;\n      display: inline-block;\n      line-height: @header-height;\n      padding: 0 10px;\n      color: #eeecec;\n      cursor: pointer;\n      &:hover {\n        background-color: rgba(255, 255, 255, 0.2);\n      }\n      .toolBar-icon {\n        margin-right: 4px;\n      }\n    }\n  }\n}\n.toolBar-dropdown {\n  .ant-dropdown-menu {\n    background-color: #3c3f41;\n    border-radius: 2px;\n    box-shadow: #1c1b1b 0px 0px 4px 0px;\n    .ant-dropdown-menu-item {\n      a {\n        min-width: 180px;\n        color: rgba(255, 253, 253, 0.79);\n        .item-icon {\n          display: inline-block;\n          width: 22px;\n        }\n      }\n      &:hover,\n      &.ant-dropdown-menu-item-active {\n        color: #fff;\n        background-color: @primary-color;\n      }\n    }\n    .ant-dropdown-menu-item-disabled {\n      a {\n        cursor: default;\n        color: rgba(236, 233, 233, 0.25);\n      }\n      &:hover {\n        background-color: transparent;\n        color: rgba(236, 233, 233, 0.25);\n      }\n    }\n    .ant-dropdown-menu-item-divider {\n      background-color: #767676;\n    }\n  }\n}\n</style>\n<style lang=\"less\">\n.session-window {\n  // .ant-drawer-content-wrapper {\n  //   box-shadow: none !important;\n  // }\n  .ant-drawer-mask {\n    background-color: transparent;\n  }\n  .ant-drawer-content {\n    background-color: #3c3f41;\n    .ant-drawer-header {\n      background-color: #3c3f41;\n      border-bottom: 1px solid #616161;\n      padding: 0;\n      .ant-drawer-close {\n        height: 34px;\n        width: 34px;\n        line-height: 34px;\n        color: rgba(255, 253, 253, 0.79);\n        font-size: 12px;\n        &:focus,\n        &:hover {\n          color: @primary-color;\n        }\n      }\n      .ant-drawer-title {\n        color: rgba(255, 253, 253, 0.79);\n        position: relative;\n        padding: 6px 16px;\n        font-size: 14px;\n        .pushpin {\n          position: absolute;\n          right: 32px;\n          top: 0px;\n          line-height: 34px;\n          font-size: 12px;\n          height: 34px;\n          cursor: pointer;\n          transition: all 0.3s;\n          &:focus,\n          &:hover {\n            color: @primary-color;\n          }\n        }\n      }\n    }\n    .ant-drawer-body {\n      padding: 0px;\n      color: rgba(255, 253, 253, 0.59);\n      .session {\n        padding: 6px 24px;\n        user-select: none;\n        cursor: pointer;\n        transition: all 0.3s;\n        &.active {\n          background-color: @primary-color;\n          color: #fff;\n        }\n        &:hover {\n          color: #fff;\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}