{"remainingRequest":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/pts/WebShell/addSession.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/pts/WebShell/addSession.vue","mtime":1605568762426},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCB7IHNhdmVDb25maWcgfSBmcm9tICdAL2FwaS9zeXN0ZW0nCmltcG9ydCBwaWNrIGZyb20gJ2xvZGFzaC5waWNrJwppbXBvcnQgeyBjcmVhdGVVdWlkIH0gZnJvbSAnQC91dGlscy91dGlsJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBZGRTZXNzaW9uJywKICBwcm9wczogWydjb250YWluZXInXSwKICBjb21wb25lbnRzOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIGxhYmVsQ29sOiB7CiAgICAgICAgeHM6IHsgc3BhbjogMjQgfSwKICAgICAgICBzbTogeyBzcGFuOiA1IH0KICAgICAgfSwKICAgICAgd3JhcHBlckNvbDogewogICAgICAgIHhzOiB7IHNwYW46IDI0IH0sCiAgICAgICAgc206IHsgc3BhbjogMTYgfQogICAgICB9LAogICAgICBjb25maXJtTG9hZGluZzogZmFsc2UsCiAgICAgIGZvcm06IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzKQogICAgfQogIH0sCiAgYmVmb3JlQ3JlYXRlKCkge30sCiAgY3JlYXRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIGFkZCgpIHsKICAgICAgdGhpcy5mb3JtLnJlc2V0RmllbGRzKCkKICAgICAgdGhpcy5lZGl0KHsgaWQ6IGNyZWF0ZVV1aWQoKSB9KQogICAgfSwKICAgIGVkaXQgKHJlY29yZCkgewogICAgICB0aGlzLm1kbCA9IE9iamVjdC5hc3NpZ24ocmVjb3JkKQogICAgICB0aGlzLnZpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmZvcm0uc2V0RmllbGRzVmFsdWUoCiAgICAgICAgICBwaWNrKAogICAgICAgICAgICB0aGlzLm1kbCwKICAgICAgICAgICAgJ2lkJywKICAgICAgICAgICAgJ25hbWUnLAogICAgICAgICAgICAnaXAnLAogICAgICAgICAgICAncG9ydCcsCiAgICAgICAgICAgICd1c2VybmFtZScsCiAgICAgICAgICAgICdwYXNzd29yZCcKICAgICAgICAgICkKICAgICAgICApCiAgICAgIH0pCiAgICB9LAogICAgY2hlY2tNdWx0aXBsZUlucHV0KHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICBpZiAodmFsdWUpIHsKICAgICAgICBjb25zdCBwYXR0ID0gL14oXGR7MSwyfXwxXGRcZHwyWzAtNF1cZHwyNVswLTVdKVwuKFxkezEsMn18MVxkXGR8MlswLTRdXGR8MjVbMC01XSlcLihcZHsxLDJ9fDFcZFxkfDJbMC00XVxkfDI1WzAtNV0pXC4oXGR7MSwyfXwxXGRcZHwyWzAtNF1cZHwyNVswLTVdKSQvCiAgICAgICAgaWYgKHBhdHQudGVzdCh2YWx1ZSkpIHsKICAgICAgICAgIGNhbGxiYWNrKCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXmraPnoa7nmoRpcOWcsOWdgCcpKQogICAgICAgIH0KICAgICAgfQogICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpUlQ5Zyw5Z2AJykpCiAgICB9LAogICAgaGFuZGxlU3VibWl0KGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgIHRoaXMuZm9ybS52YWxpZGF0ZUZpZWxkcygoZXJyLCB2YWx1ZXMpID0+IHsKICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgdGhpcy4kZW1pdCgnb2snLCB2YWx1ZXMpCiAgICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZQogICAgICAgICAgLy8gdGhpcy5jb25maXJtTG9hZGluZyA9IHRydWUKICAgICAgICAgIC8vIHNhdmVDb25maWcodmFsdWVzKQogICAgICAgICAgLy8gICAudGhlbihyZXMgPT4gewogICAgICAgICAgLy8gICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgLy8gICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv53lrZjmiJDlip8nKQogICAgICAgICAgLy8gICAgICAgdGhpcy4kZW1pdCgnb2snKQogICAgICAgICAgLy8gICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2UKICAgICAgICAgIC8vICAgICB9IGVsc2UgewogICAgICAgICAgLy8gICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpCiAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgLy8gICB9KQogICAgICAgICAgLy8gICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgLy8gICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ezu+e7n+mUmeivr++8jOivt+eojeWQjuWGjeivlScpCiAgICAgICAgICAvLyAgIH0pCiAgICAgICAgICAvLyAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIC8vICAgICB0aGlzLmNvbmZpcm1Mb2FkaW5nID0gZmFsc2UKICAgICAgICAgIC8vICAgfSkKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["addSession.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addSession.vue","sourceRoot":"src/components/pts/WebShell","sourcesContent":["<template>\n  <a-modal\n    title=\"新建会话\"\n    :width=\"400\"\n    v-model=\"visible\"\n    :confirmLoading=\"confirmLoading\"\n    :get-container=\"container\"\n    wrap-class-name=\"session-model\"\n    @ok=\"handleSubmit\"\n  >\n    <a-form :form=\"form\" hideRequiredMark>\n      <a-form-item style=\"display:none\">\n        <a-input v-decorator=\"['id']\" />\n      </a-form-item>\n      <a-form-item label=\"连接名称\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\n        <a-input\n          placeholder=\"连接名称\"\n          v-decorator=\"['name',{rules: [{ required: true, message: '请输入连接名称' }]}]\"\n        />\n      </a-form-item>\n      <a-form-item label=\"IP地址\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\n        <a-input\n          placeholder=\"IP地址\"\n          v-decorator=\"['ip',{rules: [{ validator: checkMultipleInput }]}]\"\n        />\n      </a-form-item>\n      <a-form-item label=\"端口\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\n        <a-input\n          placeholder=\"端口\"\n          v-decorator=\"['port',{initialValue: '22', rules: [{ required: true, message: '请输入端口' }]}]\"\n        />\n      </a-form-item>\n      <a-form-item label=\"用户名\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\n        <a-input\n          placeholder=\"用户名\"\n          v-decorator=\"['username',{rules: [{ required: true, message: '请输入用户名' }]}]\"\n        />\n      </a-form-item>\n      <a-form-item label=\"密码\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\n        <a-input\n          placeholder=\"密码\"\n          type=\"password\"\n          v-decorator=\"['password',{rules: [{ required: true, message: '请输入密码' }]}]\"\n        />\n      </a-form-item>\n    </a-form>\n  </a-modal>\n</template>\n<script>\n// import { saveConfig } from '@/api/system'\nimport pick from 'lodash.pick'\nimport { createUuid } from '@/utils/util'\n\nexport default {\n  name: 'AddSession',\n  props: ['container'],\n  components: {},\n  data() {\n    return {\n      visible: false,\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 5 }\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 16 }\n      },\n      confirmLoading: false,\n      form: this.$form.createForm(this)\n    }\n  },\n  beforeCreate() {},\n  created() {},\n  methods: {\n    add() {\n      this.form.resetFields()\n      this.edit({ id: createUuid() })\n    },\n    edit (record) {\n      this.mdl = Object.assign(record)\n      this.visible = true\n      this.$nextTick(() => {\n        this.form.setFieldsValue(\n          pick(\n            this.mdl,\n            'id',\n            'name',\n            'ip',\n            'port',\n            'username',\n            'password'\n          )\n        )\n      })\n    },\n    checkMultipleInput(rule, value, callback) {\n      if (value) {\n        const patt = /^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/\n        if (patt.test(value)) {\n          callback()\n        } else {\n          callback(new Error('请输入正确的ip地址'))\n        }\n      }\n      callback(new Error('请输入IP地址'))\n    },\n    handleSubmit(e) {\n      e.preventDefault()\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          this.$emit('ok', values)\n          this.visible = false\n          // this.confirmLoading = true\n          // saveConfig(values)\n          //   .then(res => {\n          //     if (res.code === 0) {\n          //       this.$message.success('保存成功')\n          //       this.$emit('ok')\n          //       this.visible = false\n          //     } else {\n          //       this.$message.success(res.msg)\n          //     }\n          //   })\n          //   .catch(() => {\n          //     this.$message.error('系统错误，请稍后再试')\n          //   })\n          //   .finally(() => {\n          //     this.confirmLoading = false\n          //   })\n        }\n      })\n    }\n  }\n}\n</script>\n"]}]}