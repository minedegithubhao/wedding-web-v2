{"remainingRequest":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/utils/request.js","dependencies":[{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/utils/request.js","mtime":1605568762443},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBWdWVBeGlvcyB9IGZyb20gJy4vYXhpb3MnOwppbXBvcnQgeyBub3RpZmljYXRpb24gfSBmcm9tICdhbnQtZGVzaWduLXZ1ZSc7CmltcG9ydCB7IEFDQ0VTU19UT0tFTiB9IGZyb20gJ0Avc3RvcmUvbXV0YXRpb24tdHlwZXMnOwp2YXIgYmFzZVVSTCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJX0JBU0VfVVJMOyAvLyDliJvlu7ogYXhpb3Mg5a6e5L6LCgp2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogYmFzZVVSTCwKICAvLyBhcGkgYmFzZV91cmwKICB0aW1lb3V0OiAxMDAwMCAvLyDor7fmsYLotoXml7bml7bpl7QKCn0pOwpleHBvcnQgdmFyIHB1cmVBeGlvcyA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogYmFzZVVSTCwKICAvLyBhcGkgYmFzZV91cmwKICB0aW1lb3V0OiAxMDAwMCAvLyDor7fmsYLotoXml7bml7bpl7QKCn0pOwoKdmFyIGVyciA9IGZ1bmN0aW9uIGVycihlcnJvcikgewogIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgdmFyIGRhdGEgPSBlcnJvci5yZXNwb25zZS5kYXRhOwogICAgdmFyIHRva2VuID0gVnVlLmxzLmdldChBQ0NFU1NfVE9LRU4pOwoKICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMykgewogICAgICBub3RpZmljYXRpb24uZXJyb3IoewogICAgICAgIG1lc3NhZ2U6ICdGb3JiaWRkZW4nLAogICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLm1lc3NhZ2UKICAgICAgfSk7CiAgICB9CgogICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxICYmICEoZGF0YS5yZXN1bHQgJiYgZGF0YS5yZXN1bHQuaXNMb2dpbikpIHsKICAgICAgbm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICBtZXNzYWdlOiAnVW5hdXRob3JpemVkJywKICAgICAgICBkZXNjcmlwdGlvbjogJ0F1dGhvcml6YXRpb24gdmVyaWZpY2F0aW9uIGZhaWxlZCcKICAgICAgfSk7CgogICAgICBpZiAodG9rZW4pIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnTG9nb3V0JykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgfSwgMTUwMCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn07IC8vIHJlcXVlc3QgaW50ZXJjZXB0b3IKCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgdmFyIHRva2VuID0gVnVlLmxzLmdldChBQ0NFU1NfVE9LRU4pOwoKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzWyd0b2tlbiddID0gdG9rZW47IC8vIOiuqeavj+S4quivt+axguaQuuW4puiHquWumuS5iSB0b2tlbiDor7fmoLnmja7lrp7pmYXmg4XlhrXoh6rooYzkv67mlLkKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGVycik7CnB1cmVBeGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIHZhciB0b2tlbiA9IFZ1ZS5scy5nZXQoQUNDRVNTX1RPS0VOKTsKCiAgaWYgKHRva2VuKSB7CiAgICBjb25maWcuaGVhZGVyc1sndG9rZW4nXSA9IHRva2VuOyAvLyDorqnmr4/kuKror7fmsYLmkLrluKboh6rlrprkuYkgdG9rZW4g6K+35qC55o2u5a6e6ZmF5oOF5Ya16Ieq6KGM5L+u5pS5CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBlcnIpOyAvLyByZXNwb25zZSBpbnRlcmNlcHRvcgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHJldHVybiByZXNwb25zZS5kYXRhOwp9LCBlcnIpOwp2YXIgaW5zdGFsbGVyID0gewogIHZtOiB7fSwKICBpbnN0YWxsOiBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSkgewogICAgVnVlLnVzZShWdWVBeGlvcywgc2VydmljZSk7CiAgfQp9OwpleHBvcnQgeyBpbnN0YWxsZXIgYXMgVnVlQXhpb3MsIHNlcnZpY2UgYXMgYXhpb3MgfTs="},{"version":3,"sources":["/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/utils/request.js"],"names":["Vue","axios","store","VueAxios","notification","ACCESS_TOKEN","baseURL","process","env","VUE_APP_API_BASE_URL","service","create","timeout","pureAxios","err","error","response","data","token","ls","get","status","message","description","result","isLogin","dispatch","then","setTimeout","window","location","reload","Promise","reject","interceptors","request","use","config","headers","installer","vm","install"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport axios from 'axios'\nimport store from '@/store'\nimport { VueAxios } from './axios'\nimport { notification } from 'ant-design-vue'\nimport { ACCESS_TOKEN } from '@/store/mutation-types'\n\nconst baseURL = process.env.VUE_APP_API_BASE_URL\n// 创建 axios 实例\nconst service = axios.create({\n  baseURL: baseURL, // api base_url\n  timeout: 10000 // 请求超时时间\n})\nexport const pureAxios = axios.create({\n  baseURL: baseURL, // api base_url\n  timeout: 10000 // 请求超时时间\n})\n\nconst err = (error) => {\n  if (error.response) {\n    const data = error.response.data\n    const token = Vue.ls.get(ACCESS_TOKEN)\n    if (error.response.status === 403) {\n      notification.error({\n        message: 'Forbidden',\n        description: data.message\n      })\n    }\n    if (error.response.status === 401 && !(data.result && data.result.isLogin)) {\n      notification.error({\n        message: 'Unauthorized',\n        description: 'Authorization verification failed'\n      })\n      if (token) {\n        store.dispatch('Logout').then(() => {\n          setTimeout(() => {\n            window.location.reload()\n          }, 1500)\n        })\n      }\n    }\n  }\n  return Promise.reject(error)\n}\n\n// request interceptor\nservice.interceptors.request.use(config => {\n  const token = Vue.ls.get(ACCESS_TOKEN)\n  if (token) {\n    config.headers['token'] = token // 让每个请求携带自定义 token 请根据实际情况自行修改\n  }\n  return config\n}, err)\n\npureAxios.interceptors.request.use(config => {\n  const token = Vue.ls.get(ACCESS_TOKEN)\n  if (token) {\n    config.headers['token'] = token // 让每个请求携带自定义 token 请根据实际情况自行修改\n  }\n  return config\n}, err)\n\n// response interceptor\nservice.interceptors.response.use((response) => {\n  return response.data\n}, err)\n\nconst installer = {\n  vm: {},\n  install (Vue) {\n    Vue.use(VueAxios, service)\n  }\n}\n\nexport {\n  installer as VueAxios,\n  service as axios\n}\n"]}]}