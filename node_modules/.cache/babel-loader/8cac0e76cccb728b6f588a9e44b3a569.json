{"remainingRequest":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/pts/WebShell/webssh.js","dependencies":[{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/pts/WebShell/webssh.js","mtime":1605568762427},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgcHJlZml4IGZyb20gJ0AvY29uZmlnL3ByZWZpeCc7CnZhciBjb25uZWN0aW9uID0ge307CnZhciBjbGllbnQgPSB7CiAgY29ubmVjdDogZnVuY3Rpb24gY29ubmVjdChvcHRpb25zLCB1dWlkKSB7CiAgICB2YXIgZW5kcG9pbnQgPSBwcmVmaXguU1NIX1dTX1VSTF9QUkVGSVg7CgogICAgaWYgKHdpbmRvdy5XZWJTb2NrZXQpIHsKICAgICAgLy8g5aaC5p6c5pSv5oyBd2Vic29ja2V0CiAgICAgIGNvbm5lY3Rpb25bdXVpZF0gPSBuZXcgV2ViU29ja2V0KGVuZHBvaW50KTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIOWQpuWImeaKpemUmQogICAgICBvcHRpb25zLm9uRXJyb3IoJ1dlYlNvY2tldCBOb3QgU3VwcG9ydGVkJywgdXVpZCk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25uZWN0aW9uW3V1aWRdLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgb3B0aW9ucy5vbkNvbm5lY3QodXVpZCk7CiAgICB9OwoKICAgIGNvbm5lY3Rpb25bdXVpZF0ub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2dCkgewogICAgICB2YXIgZGF0YSA9IGV2dC5kYXRhLnRvU3RyaW5nKCk7CiAgICAgIG9wdGlvbnMub25EYXRhKGRhdGEsIHV1aWQpOwogICAgfTsKCiAgICBjb25uZWN0aW9uW3V1aWRdLm9uY2xvc2UgPSBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIG9wdGlvbnMub25DbG9zZSh1dWlkKTsKICAgIH07CiAgfSwKICBjbG9zZTogZnVuY3Rpb24gY2xvc2UodXVpZCkgewogICAgY29ubmVjdGlvblt1dWlkXS5jbG9zZSgpOwogIH0sCiAgc2VuZDogZnVuY3Rpb24gc2VuZChkYXRhLCB1dWlkKSB7CiAgICAvLyDov57mjqXlj4LmlbAKICAgIGNvbm5lY3Rpb25bdXVpZF0uc2VuZChKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgfSwKICBzZW5kSW5pdERhdGE6IGZ1bmN0aW9uIHNlbmRJbml0RGF0YShvcHRpb25zLCB1dWlkKSB7CiAgICAvLyDov57mjqXlj4LmlbAKICAgIGNvbm5lY3Rpb25bdXVpZF0uc2VuZChKU09OLnN0cmluZ2lmeShvcHRpb25zKSk7CiAgfSwKICBzZW5kQ2xpZW50RGF0YTogZnVuY3Rpb24gc2VuZENsaWVudERhdGEoZGF0YSwgdXVpZCkgewogICAgLy8g5Y+R6YCB5oyH5LukCiAgICBjb25uZWN0aW9uW3V1aWRdLnNlbmQoSlNPTi5zdHJpbmdpZnkoewogICAgICBvcGVyYXRlOiAnY29tbWFuZCcsCiAgICAgIGNvbW1hbmQ6IGRhdGEKICAgIH0pKTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IGNsaWVudDs="},{"version":3,"sources":["/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/components/pts/WebShell/webssh.js"],"names":["prefix","connection","client","connect","options","uuid","endpoint","SSH_WS_URL_PREFIX","window","WebSocket","onError","onopen","onConnect","onmessage","evt","data","toString","onData","onclose","onClose","close","send","JSON","stringify","sendInitData","sendClientData","operate","command"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,iBAAnB;AAEA,IAAMC,UAAU,GAAG,EAAnB;AAEA,IAAMC,MAAM,GAAG;AACbC,EAAAA,OAAO,EAAE,iBAACC,OAAD,EAAUC,IAAV,EAAmB;AAC1B,QAAMC,QAAQ,GAAGN,MAAM,CAACO,iBAAxB;;AACA,QAAIC,MAAM,CAACC,SAAX,EAAsB;AACpB;AACAR,MAAAA,UAAU,CAACI,IAAD,CAAV,GAAmB,IAAII,SAAJ,CAAcH,QAAd,CAAnB;AACD,KAHD,MAGO;AACL;AACAF,MAAAA,OAAO,CAACM,OAAR,CAAgB,yBAAhB,EAA2CL,IAA3C;AACA;AACD;;AAEDJ,IAAAA,UAAU,CAACI,IAAD,CAAV,CAAiBM,MAAjB,GAA0B,YAAY;AACpCP,MAAAA,OAAO,CAACQ,SAAR,CAAkBP,IAAlB;AACD,KAFD;;AAIAJ,IAAAA,UAAU,CAACI,IAAD,CAAV,CAAiBQ,SAAjB,GAA6B,UAAUC,GAAV,EAAe;AAC1C,UAAMC,IAAI,GAAGD,GAAG,CAACC,IAAJ,CAASC,QAAT,EAAb;AACAZ,MAAAA,OAAO,CAACa,MAAR,CAAeF,IAAf,EAAqBV,IAArB;AACD,KAHD;;AAKAJ,IAAAA,UAAU,CAACI,IAAD,CAAV,CAAiBa,OAAjB,GAA2B,UAAUJ,GAAV,EAAe;AACxCV,MAAAA,OAAO,CAACe,OAAR,CAAgBd,IAAhB;AACD,KAFD;AAGD,GAxBY;AAyBbe,EAAAA,KAAK,EAAE,eAACf,IAAD,EAAU;AACfJ,IAAAA,UAAU,CAACI,IAAD,CAAV,CAAiBe,KAAjB;AACD,GA3BY;AA4BbC,EAAAA,IAAI,EAAE,cAACN,IAAD,EAAOV,IAAP,EAAgB;AACpB;AACAJ,IAAAA,UAAU,CAACI,IAAD,CAAV,CAAiBgB,IAAjB,CAAsBC,IAAI,CAACC,SAAL,CAAeR,IAAf,CAAtB;AACD,GA/BY;AAgCbS,EAAAA,YAAY,EAAE,sBAACpB,OAAD,EAAUC,IAAV,EAAmB;AAC/B;AACAJ,IAAAA,UAAU,CAACI,IAAD,CAAV,CAAiBgB,IAAjB,CAAsBC,IAAI,CAACC,SAAL,CAAenB,OAAf,CAAtB;AACD,GAnCY;AAoCbqB,EAAAA,cAAc,EAAE,wBAACV,IAAD,EAAOV,IAAP,EAAgB;AAC9B;AACAJ,IAAAA,UAAU,CAACI,IAAD,CAAV,CAAiBgB,IAAjB,CAAsBC,IAAI,CAACC,SAAL,CAAe;AAAEG,MAAAA,OAAO,EAAE,SAAX;AAAsBC,MAAAA,OAAO,EAAEZ;AAA/B,KAAf,CAAtB;AACD;AAvCY,CAAf;AAyCA,eAAeb,MAAf","sourcesContent":["import prefix from '@/config/prefix'\n\nconst connection = {}\n\nconst client = {\n  connect: (options, uuid) => {\n    const endpoint = prefix.SSH_WS_URL_PREFIX\n    if (window.WebSocket) {\n      // 如果支持websocket\n      connection[uuid] = new WebSocket(endpoint)\n    } else {\n      // 否则报错\n      options.onError('WebSocket Not Supported', uuid)\n      return\n    }\n\n    connection[uuid].onopen = function () {\n      options.onConnect(uuid)\n    }\n\n    connection[uuid].onmessage = function (evt) {\n      const data = evt.data.toString()\n      options.onData(data, uuid)\n    }\n\n    connection[uuid].onclose = function (evt) {\n      options.onClose(uuid)\n    }\n  },\n  close: (uuid) => {\n    connection[uuid].close()\n  },\n  send: (data, uuid) => {\n    // 连接参数\n    connection[uuid].send(JSON.stringify(data))\n  },\n  sendInitData: (options, uuid) => {\n    // 连接参数\n    connection[uuid].send(JSON.stringify(options))\n  },\n  sendClientData: (data, uuid) => {\n    // 发送指令\n    connection[uuid].send(JSON.stringify({ operate: 'command', command: data }))\n  }\n}\nexport default client\n"]}]}