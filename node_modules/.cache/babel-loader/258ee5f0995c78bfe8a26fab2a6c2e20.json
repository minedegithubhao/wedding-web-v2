{"remainingRequest":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/store/modules/permission.js","dependencies":[{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/store/modules/permission.js","mtime":1605568762439},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCB7IGNvbnN0YW50Um91dGVyTWFwIH0gZnJvbSAnQC9jb25maWcvcm91dGVyLmNvbmZpZyc7CmltcG9ydCB7IGdlbmVyYXRvckR5bmFtaWNSb3V0ZXIsIGdlbmVyYXRvckdldFRvcE1lbnUgfSBmcm9tICdAL3V0aWxzL3JvdXRlclV0aWwnOwp2YXIgcGVybWlzc2lvbiA9IHsKICBzdGF0ZTogewogICAgcm91dGVyczogY29uc3RhbnRSb3V0ZXJNYXAsCiAgICBhZGRSb3V0ZXJzOiB7fSwKICAgIGFsbFRvcE1lbnVzOiB7fSwKICAgIHRvcE1lbnVMaXN0OiBbXQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfUk9VVEVSUzogZnVuY3Rpb24gU0VUX1JPVVRFUlMoc3RhdGUsIHBhcmFtcykgewogICAgICBzdGF0ZS5hZGRSb3V0ZXJzID0gcGFyYW1zLnJvdXRlcnMucm91dGVyc0J5VG9wTWVudTsKICAgICAgc3RhdGUuYWxsVG9wTWVudXMgPSBwYXJhbXMucm91dGVycy5hbGxUb3BNZW51czsKICAgICAgc3RhdGUucm91dGVycyA9IGNvbnN0YW50Um91dGVyTWFwLmNvbmNhdChwYXJhbXMucm91dGVyc1twYXJhbXMuZGF0YS5jdXJyZW50VG9wTWVudV0pOwogICAgfSwKICAgIFNFVF9UT1BfUk9VVEVSUzogZnVuY3Rpb24gU0VUX1RPUF9ST1VURVJTKHN0YXRlLCB0b3BNZW51TGlzdCkgewogICAgICBzdGF0ZS50b3BNZW51TGlzdCA9IHRvcE1lbnVMaXN0OwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgLyoqCiAgICAgKiDmnoTlu7rojrflj5blkozmnoTlu7rot6/nlLHlkozoj5zljZXkv6Hmga8KICAgICAqIEBwYXJhbSBjb21taXQKICAgICAqIEBwYXJhbSBkYXRhCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fQogICAgICogQGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIEdlbmVyYXRlUm91dGVzOiBmdW5jdGlvbiBHZW5lcmF0ZVJvdXRlcyhfcmVmLCBkYXRhKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgZ2VuZXJhdG9yRHluYW1pY1JvdXRlcihkYXRhKS50aGVuKGZ1bmN0aW9uIChyb3V0ZXJzKSB7CiAgICAgICAgICBjb21taXQoJ1NFVF9ST1VURVJTJywgewogICAgICAgICAgICByb3V0ZXJzOiByb3V0ZXJzLAogICAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgICB9KTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKgogICAgICog6I635Y+W5Li76I+c5Y2V5L+h5oGvCiAgICAgKiBAcGFyYW0gY29tbWl0CiAgICAgKiBAcGFyYW0gZGF0YQogICAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn0KICAgICAqIEBjb25zdHJ1Y3RvcgogICAgICovCiAgICBHZXRUb3BNZW51OiBmdW5jdGlvbiBHZXRUb3BNZW51KF9yZWYyLCBkYXRhKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIGdlbmVyYXRvckdldFRvcE1lbnUoZGF0YSkudGhlbihmdW5jdGlvbiAodG9wTWVudUxpc3QpIHsKICAgICAgICAgIGNvbW1pdCgnU0VUX1RPUF9ST1VURVJTJywgdG9wTWVudUxpc3QpOwogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IHBlcm1pc3Npb247"},{"version":3,"sources":["/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/store/modules/permission.js"],"names":["constantRouterMap","generatorDynamicRouter","generatorGetTopMenu","permission","state","routers","addRouters","allTopMenus","topMenuList","mutations","SET_ROUTERS","params","routersByTopMenu","concat","data","currentTopMenu","SET_TOP_ROUTERS","actions","GenerateRoutes","commit","Promise","resolve","then","GetTopMenu"],"mappings":";;AAAA,SAASA,iBAAT,QAAkC,wBAAlC;AACA,SAASC,sBAAT,EAAiCC,mBAAjC,QAA4D,oBAA5D;AAEA,IAAMC,UAAU,GAAG;AACjBC,EAAAA,KAAK,EAAE;AACLC,IAAAA,OAAO,EAAEL,iBADJ;AAELM,IAAAA,UAAU,EAAE,EAFP;AAGLC,IAAAA,WAAW,EAAE,EAHR;AAILC,IAAAA,WAAW,EAAE;AAJR,GADU;AAOjBC,EAAAA,SAAS,EAAE;AACTC,IAAAA,WAAW,EAAE,qBAACN,KAAD,EAAQO,MAAR,EAAmB;AAC9BP,MAAAA,KAAK,CAACE,UAAN,GAAmBK,MAAM,CAACN,OAAP,CAAeO,gBAAlC;AACAR,MAAAA,KAAK,CAACG,WAAN,GAAoBI,MAAM,CAACN,OAAP,CAAeE,WAAnC;AACAH,MAAAA,KAAK,CAACC,OAAN,GAAgBL,iBAAiB,CAACa,MAAlB,CAAyBF,MAAM,CAACN,OAAP,CAAeM,MAAM,CAACG,IAAP,CAAYC,cAA3B,CAAzB,CAAhB;AACD,KALQ;AAMTC,IAAAA,eAAe,EAAE,yBAACZ,KAAD,EAAQI,WAAR,EAAwB;AACvCJ,MAAAA,KAAK,CAACI,WAAN,GAAoBA,WAApB;AACD;AARQ,GAPM;AAiBjBS,EAAAA,OAAO,EAAE;AACP;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,IAAAA,cARO,gCAQoBJ,IARpB,EAQ0B;AAAA,UAAhBK,MAAgB,QAAhBA,MAAgB;AAC/B,aAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5BpB,QAAAA,sBAAsB,CAACa,IAAD,CAAtB,CAA6BQ,IAA7B,CAAkC,UAAAjB,OAAO,EAAI;AAC3Cc,UAAAA,MAAM,CAAC,aAAD,EAAgB;AAAEd,YAAAA,OAAO,EAAPA,OAAF;AAAWS,YAAAA,IAAI,EAAJA;AAAX,WAAhB,CAAN;AACAO,UAAAA,OAAO;AACR,SAHD;AAID,OALM,CAAP;AAMD,KAfM;;AAgBP;AACJ;AACA;AACA;AACA;AACA;AACA;AACIE,IAAAA,UAvBO,6BAuBgBT,IAvBhB,EAuBsB;AAAA,UAAhBK,MAAgB,SAAhBA,MAAgB;AAC3B,aAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5BnB,QAAAA,mBAAmB,CAACY,IAAD,CAAnB,CAA0BQ,IAA1B,CAA+B,UAAAd,WAAW,EAAI;AAC5CW,UAAAA,MAAM,CAAC,iBAAD,EAAoBX,WAApB,CAAN;AACAa,UAAAA,OAAO;AACR,SAHD;AAID,OALM,CAAP;AAMD;AA9BM;AAjBQ,CAAnB;AAmDA,eAAelB,UAAf","sourcesContent":["import { constantRouterMap } from '@/config/router.config'\nimport { generatorDynamicRouter, generatorGetTopMenu } from '@/utils/routerUtil'\n\nconst permission = {\n  state: {\n    routers: constantRouterMap,\n    addRouters: {},\n    allTopMenus: {},\n    topMenuList: []\n  },\n  mutations: {\n    SET_ROUTERS: (state, params) => {\n      state.addRouters = params.routers.routersByTopMenu\n      state.allTopMenus = params.routers.allTopMenus\n      state.routers = constantRouterMap.concat(params.routers[params.data.currentTopMenu])\n    },\n    SET_TOP_ROUTERS: (state, topMenuList) => {\n      state.topMenuList = topMenuList\n    }\n  },\n  actions: {\n    /**\n     * 构建获取和构建路由和菜单信息\n     * @param commit\n     * @param data\n     * @returns {Promise<any>}\n     * @constructor\n     */\n    GenerateRoutes({ commit }, data) {\n      return new Promise(resolve => {\n        generatorDynamicRouter(data).then(routers => {\n          commit('SET_ROUTERS', { routers, data })\n          resolve()\n        })\n      })\n    },\n    /**\n     * 获取主菜单信息\n     * @param commit\n     * @param data\n     * @returns {Promise<any>}\n     * @constructor\n     */\n    GetTopMenu({ commit }, data) {\n      return new Promise(resolve => {\n        generatorGetTopMenu(data).then(topMenuList => {\n          commit('SET_TOP_ROUTERS', topMenuList)\n          resolve()\n        })\n      })\n    }\n  }\n}\n\nexport default permission\n"]}]}