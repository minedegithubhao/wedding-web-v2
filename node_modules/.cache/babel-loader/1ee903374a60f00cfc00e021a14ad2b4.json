{"remainingRequest":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/utils/download.js","dependencies":[{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/utils/download.js","mtime":1605568762442},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsIjsKaW1wb3J0IHsgcHVyZUF4aW9zLCBheGlvcyB9IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCc7CnZhciBkb3dubG9hZFVybCA9ICcvc3lzdGVtL2NvbW1vbi9kb3dubG9hZCc7CnZhciBtaW1lTWFwID0gewogIHhsc3g6ICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCcsCiAgemlwOiAnYXBwbGljYXRpb24vemlwJywKICB4bWw6ICdhcHBsaWNhdGlvbi94bWwnLAogIGRvYzogJ2FwcGxpY2F0aW9uL21zd29yZCcKfTsKZXhwb3J0IGZ1bmN0aW9uIGV4cG9ydEV4Y2VsKHVybCwgcGFyYW1zKSB7CiAgYXhpb3MoewogICAgdXJsOiB1cmwsCiAgICBtZXRob2Q6ICdwb3N0JywKICAgIHBhcmFtczogcGFyYW1zCiAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgZG93bmxvYWRYbHN4KHJlcy5tc2cpOwogICAgfQogIH0pOwp9Ci8qKgogKiDkuIvovb0ueGxzeOaWh+S7tgogKiBAcGFyYW0ge1N0cmluZ30gZmlsZW5hbWUg5paH5Lu25ZCNCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkWGxzeChmaWxlbmFtZSkgewogIHB1cmVBeGlvcyh7CiAgICB1cmw6IGRvd25sb2FkVXJsLAogICAgbWV0aG9kOiAnZ2V0JywKICAgIHBhcmFtczogewogICAgICBmaWxlTmFtZTogZmlsZW5hbWUsCiAgICAgIGRlbGV0ZTogdHJ1ZQogICAgfSwKICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InCiAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICByZXNvbHZlQmxvYihyZXMsIG1pbWVNYXAueGxzeCk7CiAgfSk7Cn0KLyoqCiAqIOS7o+eggeeUn+aIkOW5tuS4i+i9veS4unppcAogKiBAcGFyYW0ge1N0cmluZ30gdXJsIOmTvuaOpQogKiBAcGFyYW0ge1N0cmluZ30gdGFibGVzIOihqOWQjQogKi8KCmV4cG9ydCBmdW5jdGlvbiBnZW5Db2RlWmlwKHVybCwgdGFibGVzKSB7CiAgcHVyZUF4aW9zKHsKICAgIHVybDogdXJsLAogICAgbWV0aG9kOiAnZ2V0JywKICAgIHBhcmFtczogewogICAgICB0YWJsZXM6IHRhYmxlcwogICAgfSwKICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InCiAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICByZXNvbHZlQmxvYihyZXMsIG1pbWVNYXAuemlwKTsKICB9KTsKfQovKioKICog5a+85Ye6d29yZAogKiBAcGFyYW0ge1N0cmluZ30gdXJsIOmTvuaOpQogKiBAcGFyYW0ge1N0cmluZ30gdGFibGVzIOihqOWQjQogKi8KCmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0b3JXb3JkKHVybCwgdGFibGVzKSB7CiAgcHVyZUF4aW9zKHsKICAgIHVybDogdXJsLAogICAgbWV0aG9kOiAnZ2V0JywKICAgIHBhcmFtczogewogICAgICB0YWJsZXM6IHRhYmxlcwogICAgfSwKICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InCiAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICByZXNvbHZlQmxvYihyZXMsIG1pbWVNYXAuZG9jKTsKICB9KTsKfQovKioKICog6Kej5p6QYmxvYuWTjeW6lOWGheWuueW5tuS4i+i9vQogKiBAcGFyYW0geyp9IHJlcyBibG9i5ZON5bqU5YaF5a65CiAqIEBwYXJhbSB7U3RyaW5nfSBtaW1lVHlwZSBNSU1F57G75Z6LCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVCbG9iKHJlcywgbWltZVR5cGUpIHsKICB2YXIgYUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdLCB7CiAgICB0eXBlOiBtaW1lVHlwZQogIH0pOyAvLyAvL+S7jnJlc3BvbnNl55qEaGVhZGVyc+S4reiOt+WPlmZpbGVuYW1lLCDlkI7nq69yZXNwb25zZS5zZXRIZWFkZXIoIkNvbnRlbnQtZGlzcG9zaXRpb24iLCAiYXR0YWNobWVudDsgZmlsZW5hbWU9eHh4eC5kb2N4Iikg6K6+572u55qE5paH5Lu25ZCNOwoKICB2YXIgcGF0dCA9IG5ldyBSZWdFeHAoJ2ZpbGVuYW1lPShbXjtdK1xcLlteXFwuO10rKTsqJyk7CiAgdmFyIGNvbnRlbnREaXNwb3NpdGlvbiA9IGRlY29kZVVSSShyZXMuaGVhZGVyc1snY29udGVudC1kaXNwb3NpdGlvbiddKTsKICB2YXIgcmVzdWx0ID0gcGF0dC5leGVjKGNvbnRlbnREaXNwb3NpdGlvbik7CiAgdmFyIGZpbGVOYW1lID0gcmVzdWx0WzFdOwogIGFMaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogIGFMaW5rLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCBmaWxlTmFtZSk7IC8vIOiuvue9ruS4i+i9veaWh+S7tuWQjeensAoKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFMaW5rKTsKICBhTGluay5jbGljaygpOwogIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYUxpbmspOwogIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGFMaW5rLmhyZWYpOwp9"},{"version":3,"sources":["/Users/cxdpc/WorkSpaces/idea_workspace/wedding-web/src/utils/download.js"],"names":["pureAxios","axios","downloadUrl","mimeMap","xlsx","zip","xml","doc","exportExcel","url","params","method","then","res","code","downloadXlsx","msg","filename","fileName","delete","responseType","resolveBlob","genCodeZip","tables","generatorWord","mimeType","aLink","document","createElement","blob","Blob","data","type","patt","RegExp","contentDisposition","decodeURI","headers","result","exec","href","URL","createObjectURL","setAttribute","body","appendChild","click","removeChild","window","revokeObjectURL"],"mappings":"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","sourcesContent":["import { pureAxios, axios } from '@/utils/request'\n\nconst downloadUrl = '/system/common/download'\n\nconst mimeMap = {\n  xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  zip: 'application/zip',\n  xml: 'application/xml',\n  doc: 'application/msword'\n}\n\nexport function exportExcel (url, params) {\n  axios({\n    url: url,\n    method: 'post',\n    params: params\n  }).then(res => {\n    if (res.code === 0) {\n      downloadXlsx(res.msg)\n    }\n  })\n}\n\n/**\n * 下载.xlsx文件\n * @param {String} filename 文件名\n */\nexport function downloadXlsx (filename) {\n  pureAxios({\n    url: downloadUrl,\n    method: 'get',\n    params: { fileName: filename, delete: true },\n    responseType: 'blob'\n  }).then(res => {\n    resolveBlob(res, mimeMap.xlsx)\n  })\n}\n\n/**\n * 代码生成并下载为zip\n * @param {String} url 链接\n * @param {String} tables 表名\n */\nexport function genCodeZip (url, tables) {\n  pureAxios({\n    url: url,\n    method: 'get',\n    params: { tables: tables },\n    responseType: 'blob'\n  }).then(res => {\n    resolveBlob(res, mimeMap.zip)\n  })\n}\n/**\n * 导出word\n * @param {String} url 链接\n * @param {String} tables 表名\n */\nexport function generatorWord (url, tables) {\n  pureAxios({\n    url: url,\n    method: 'get',\n    params: { tables: tables },\n    responseType: 'blob'\n  }).then(res => {\n    resolveBlob(res, mimeMap.doc)\n  })\n}\n\n/**\n * 解析blob响应内容并下载\n * @param {*} res blob响应内容\n * @param {String} mimeType MIME类型\n */\nexport function resolveBlob (res, mimeType) {\n  const aLink = document.createElement('a')\n  var blob = new Blob([res.data], { type: mimeType })\n  // //从response的headers中获取filename, 后端response.setHeader(\"Content-disposition\", \"attachment; filename=xxxx.docx\") 设置的文件名;\n  var patt = new RegExp('filename=([^;]+\\\\.[^\\\\.;]+);*')\n  var contentDisposition = decodeURI(res.headers['content-disposition'])\n  var result = patt.exec(contentDisposition)\n  var fileName = result[1]\n  aLink.href = URL.createObjectURL(blob)\n  aLink.setAttribute('download', fileName) // 设置下载文件名称\n  document.body.appendChild(aLink)\n  aLink.click()\n  document.body.removeChild(aLink)\n  window.URL.revokeObjectURL(aLink.href)\n}\n"]}]}